{"version":3,"file":"index-16a6fcc9.js","sources":["../../node_modules/@portis/web3-provider-engine/util/stoplight.js","../../node_modules/@portis/web3-provider-engine/util/rpc-cache-utils.js","../../node_modules/@portis/web3-provider-engine/util/random-id.js","../../node_modules/@portis/web3-provider-engine/util/create-payload.js","../../node_modules/@portis/web3-provider-engine/index.js","../../node_modules/@portis/web3-provider-engine/subproviders/subprovider.js","../../node_modules/@portis/web3-provider-engine/subproviders/json-rpc-engine-middleware.js","../../node_modules/@portis/eth-json-rpc-middleware/cache-utils.js","../../node_modules/@portis/eth-json-rpc-middleware/block-cache.js","../../node_modules/@portis/web3-provider-engine/subproviders/cache.js","../../node_modules/@portis/web3-provider-engine/subproviders/fixture.js","../../node_modules/@portis/web3-provider-engine/subproviders/filters.js","../../node_modules/@portis/web3-provider-engine/util/estimate-gas.js","../../node_modules/@portis/web3-provider-engine/subproviders/hooked-wallet.js","../../node_modules/@portis/web3-provider-engine/subproviders/nonce-tracker.js","../../node_modules/@portis/web3-provider-engine/subproviders/subscriptions.js","../../node_modules/penpal/lib/index.js","../../node_modules/@portis/web3/es/networks.js","../../node_modules/@portis/web3/es/utils/getTxGas.js","../../node_modules/@portis/web3/es/utils/query.js","../../node_modules/@portis/web3/es/utils/onWindowLoad.js","../../node_modules/pocket-js-core/src/models/blockchain.js","../../node_modules/axios/lib/helpers/bind.js","../../node_modules/axios/lib/utils.js","../../node_modules/axios/node_modules/is-buffer/index.js","../../node_modules/axios/lib/core/createError.js","../../node_modules/axios/lib/core/enhanceError.js","../../node_modules/axios/lib/helpers/buildURL.js","../../node_modules/axios/lib/helpers/parseHeaders.js","../../node_modules/axios/lib/helpers/isURLSameOrigin.js","../../node_modules/axios/lib/helpers/cookies.js","../../node_modules/axios/lib/adapters/xhr.js","../../node_modules/axios/lib/core/settle.js","../../node_modules/axios/lib/defaults.js","../../node_modules/axios/lib/helpers/normalizeHeaderName.js","../../node_modules/axios/lib/core/InterceptorManager.js","../../node_modules/axios/lib/core/transformData.js","../../node_modules/axios/lib/cancel/isCancel.js","../../node_modules/axios/lib/core/dispatchRequest.js","../../node_modules/axios/lib/helpers/combineURLs.js","../../node_modules/axios/lib/helpers/isAbsoluteURL.js","../../node_modules/axios/lib/core/Axios.js","../../node_modules/axios/lib/cancel/Cancel.js","../../node_modules/axios/lib/cancel/CancelToken.js","../../node_modules/axios/lib/axios.js","../../node_modules/axios/lib/helpers/spread.js","../../node_modules/axios/index.js","../../node_modules/pocket-js-core/src/utils/constants.js","../../node_modules/pocket-js-core/src/models/node.js","../../node_modules/pocket-js-core/src/models/dispatch.js","../../node_modules/pocket-js-core/src/models/relay.js","../../node_modules/pocket-js-core/src/models/report.js","../../node_modules/pocket-js-core/src/models/wallet.js","../../node_modules/pocket-js-core/src/models/index.js","../../node_modules/pocket-js-core/src/pocket.js","../../node_modules/pocket-js-core/src/index.js","../../node_modules/@portis/web3/es/index.js","../../node_modules/@portis/web3/es/utils/secureOrigin.js","../../node_modules/@portis/web3/es/styles.js"],"sourcesContent":["const EventEmitter = require('events').EventEmitter\nconst inherits = require('util').inherits\n\nmodule.exports = Stoplight\n\n\ninherits(Stoplight, EventEmitter)\n\nfunction Stoplight(){\n  const self = this\n  EventEmitter.call(self)\n  self.isLocked = true\n}\n\nStoplight.prototype.go = function(){\n  const self = this\n  self.isLocked = false\n  self.emit('unlock')\n}\n\nStoplight.prototype.stop = function(){\n  const self = this\n  self.isLocked = true\n  self.emit('lock')\n}\n\nStoplight.prototype.await = function(fn){\n  const self = this\n  if (self.isLocked) {\n    self.once('unlock', fn)\n  } else {\n    setTimeout(fn)\n  }\n}","const stringify = require('json-stable-stringify')\n\nmodule.exports = {\n  cacheIdentifierForPayload: cacheIdentifierForPayload,\n  canCache: canCache,\n  blockTagForPayload: blockTagForPayload,\n  paramsWithoutBlockTag: paramsWithoutBlockTag,\n  blockTagParamIndex: blockTagParamIndex,\n  cacheTypeForPayload: cacheTypeForPayload,\n}\n\nfunction cacheIdentifierForPayload(payload, opts = {}){\n  if (!canCache(payload)) return null\n  const { includeBlockRef } = opts\n  const params = includeBlockRef ? payload.params : paramsWithoutBlockTag(payload)\n  return payload.method + ':' + stringify(params)\n}\n\nfunction canCache(payload){\n  return cacheTypeForPayload(payload) !== 'never'\n}\n\nfunction blockTagForPayload(payload){\n  var index = blockTagParamIndex(payload);\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return null;\n  }\n\n  return payload.params[index];\n}\n\nfunction paramsWithoutBlockTag(payload){\n  var index = blockTagParamIndex(payload);\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return payload.params;\n  }\n\n  // eth_getBlockByNumber has the block tag first, then the optional includeTx? param\n  if (payload.method === 'eth_getBlockByNumber') {\n    return payload.params.slice(1);\n  }\n\n  return payload.params.slice(0,index);\n}\n\nfunction blockTagParamIndex(payload){\n  switch(payload.method) {\n    // blockTag is third param\n    case 'eth_getStorageAt':\n      return 2\n    // blockTag is second param\n    case 'eth_getBalance':\n    case 'eth_getCode':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n      return 1\n    // blockTag is first param\n    case 'eth_getBlockByNumber':\n      return 0\n    // there is no blockTag\n    default:\n      return undefined\n  }\n}\n\nfunction cacheTypeForPayload(payload) {\n  switch (payload.method) {\n    // cache permanently\n    case 'web3_clientVersion':\n    case 'web3_sha3':\n    case 'eth_protocolVersion':\n    case 'eth_getBlockTransactionCountByHash':\n    case 'eth_getUncleCountByBlockHash':\n    case 'eth_getCode':\n    case 'eth_getBlockByHash':\n    case 'eth_getTransactionByHash':\n    case 'eth_getTransactionByBlockHashAndIndex':\n    case 'eth_getTransactionReceipt':\n    case 'eth_getUncleByBlockHashAndIndex':\n    case 'eth_getCompilers':\n    case 'eth_compileLLL':\n    case 'eth_compileSolidity':\n    case 'eth_compileSerpent':\n    case 'shh_version':\n      return 'perma'\n\n    // cache until fork\n    case 'eth_getBlockByNumber':\n    case 'eth_getBlockTransactionCountByNumber':\n    case 'eth_getUncleCountByBlockNumber':\n    case 'eth_getTransactionByBlockNumberAndIndex':\n    case 'eth_getUncleByBlockNumberAndIndex':\n      return 'fork'\n\n    // cache for block\n    case 'eth_gasPrice':\n    case 'eth_getBalance':\n    case 'eth_getStorageAt':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n    case 'eth_getFilterLogs':\n    case 'eth_getLogs':\n    case 'eth_blockNumber':\n      return 'block'\n\n    // never cache\n    case 'net_version':\n    case 'net_peerCount':\n    case 'net_listening':\n    case 'eth_syncing':\n    case 'eth_sign':\n    case 'eth_coinbase':\n    case 'eth_mining':\n    case 'eth_hashrate':\n    case 'eth_accounts':\n    case 'eth_sendTransaction':\n    case 'eth_sendRawTransaction':\n    case 'eth_newFilter':\n    case 'eth_newBlockFilter':\n    case 'eth_newPendingTransactionFilter':\n    case 'eth_uninstallFilter':\n    case 'eth_getFilterChanges':\n    case 'eth_getWork':\n    case 'eth_submitWork':\n    case 'eth_submitHashrate':\n    case 'db_putString':\n    case 'db_getString':\n    case 'db_putHex':\n    case 'db_getHex':\n    case 'shh_post':\n    case 'shh_newIdentity':\n    case 'shh_hasIdentity':\n    case 'shh_newGroup':\n    case 'shh_addToGroup':\n    case 'shh_newFilter':\n    case 'shh_uninstallFilter':\n    case 'shh_getFilterChanges':\n    case 'shh_getMessages':\n      return 'never'\n  }\n}\n","// gotta keep it within MAX_SAFE_INTEGER\nconst extraDigits = 3\n\nmodule.exports = createRandomId\n\n\nfunction createRandomId(){\n  // 13 time digits\n  var datePart = new Date().getTime()*Math.pow(10, extraDigits)\n  // 3 random digits\n  var extraPart = Math.floor(Math.random()*Math.pow(10, extraDigits))\n  // 16 digits\n  return datePart+extraPart\n}","const getRandomId = require('./random-id.js')\nconst extend = require('xtend')\n\nmodule.exports = createPayload\n\n\nfunction createPayload(data){\n  return extend({\n    // defaults\n    id: getRandomId(),\n    jsonrpc: '2.0',\n    params: [],\n    // user-specified\n  }, data)\n}\n","const EventEmitter = require('events').EventEmitter\nconst inherits = require('util').inherits\nconst ethUtil = require('ethereumjs-util')\nconst EthBlockTracker = require('eth-block-tracker')\nconst map = require('async/map')\nconst eachSeries = require('async/eachSeries')\nconst Stoplight = require('./util/stoplight.js')\nconst cacheUtils = require('./util/rpc-cache-utils.js')\nconst createPayload = require('./util/create-payload.js')\nconst noop = function(){}\n\nmodule.exports = Web3ProviderEngine\n\n\ninherits(Web3ProviderEngine, EventEmitter)\n\n// fix for web3.js\nObject.defineProperty(Web3ProviderEngine, 'name', { value: 'HttpProvider' })\n\nfunction Web3ProviderEngine(opts) {\n  const self = this\n  EventEmitter.call(self)\n  self.setMaxListeners(30)\n  // parse options\n  opts = opts || {}\n\n  // block polling\n  const directProvider = { sendAsync: self._handleAsync.bind(self) }\n  const blockTrackerProvider = opts.blockTrackerProvider || directProvider\n  self._blockTracker = opts.blockTracker || new EthBlockTracker({\n    provider: blockTrackerProvider,\n    pollingInterval: opts.pollingInterval || 4000,\n    setSkipCacheFlag: true,\n  })\n\n  // set initialization blocker\n  self._ready = new Stoplight()\n\n  // local state\n  self.currentBlock = null\n  self._providers = []\n}\n\n// public\n\nWeb3ProviderEngine.prototype.start = function(cb = noop){\n  const self = this\n\n  // trigger start\n  self._ready.go()\n\n  // on new block, request block body and emit as events\n  self._blockTracker.on('latest', (blockNumber) => {\n    // get block body\n    self._getBlockByNumber(blockNumber, (err, block) => {\n      if (err) {\n        this.emit('error', err)\n        return\n      }\n      if (!block) {\n        return\n      }\n      const bufferBlock = toBufferBlock(block)\n      // set current + emit \"block\" event\n      self._setCurrentBlock(bufferBlock)\n      // emit other events\n      self.emit('rawBlock', block)\n      self.emit('latest', block)\n    })\n  })\n\n  // forward other events\n  self._blockTracker.on('sync', self.emit.bind(self, 'sync'))\n  self._blockTracker.on('error', self.emit.bind(self, 'error'))\n\n  // update state\n  self._running = true\n  // signal that we started\n  self.emit('start')\n}\n\nWeb3ProviderEngine.prototype.stop = function(){\n  const self = this\n  // stop block polling by removing event listeners\n  self._blockTracker.removeAllListeners()\n  // update state\n  self._running = false\n  // signal that we stopped\n  self.emit('stop')\n}\n\nWeb3ProviderEngine.prototype.isRunning = function(){\n  const self = this\n  return self._running\n}\n\nWeb3ProviderEngine.prototype.addProvider = function(source, index){\n  const self = this\n  if (typeof index === 'number') {\n    self._providers.splice(index, 0, source)\n  } else {\n    self._providers.push(source)\n  }\n  source.setEngine(this)\n}\n\nWeb3ProviderEngine.prototype.removeProvider = function(source){\n  const self = this\n  const index = self._providers.indexOf(source)\n  if (index < 0) throw new Error('Provider not found.')\n  self._providers.splice(index, 1)\n}\n\nWeb3ProviderEngine.prototype.send = function(payload){\n  throw new Error('Web3ProviderEngine does not support synchronous requests.')\n}\n\nWeb3ProviderEngine.prototype.sendAsync = function(payload, cb){\n  const self = this\n  self._ready.await(function(){\n\n    if (Array.isArray(payload)) {\n      // handle batch\n      map(payload, self._handleAsync.bind(self), cb)\n    } else {\n      // handle single\n      self._handleAsync(payload, cb)\n    }\n\n  })\n}\n\n// private\n\nWeb3ProviderEngine.prototype._getBlockByNumber = function(blockNumber, cb) {\n  const req = createPayload({ method: 'eth_getBlockByNumber', params: [blockNumber, false], skipCache: true })\n  this._handleAsync(req, (err, res) => {\n    if (err) return cb(err)\n    return cb(null, res.result)\n  })\n}\n\nWeb3ProviderEngine.prototype._handleAsync = function(payload, finished) {\n  var self = this\n  var currentProvider = -1\n  var result = null\n  var error = null\n\n  var stack = []\n\n  next()\n\n  function next(after) {\n    currentProvider += 1\n    stack.unshift(after)\n\n    // Bubbled down as far as we could go, and the request wasn't\n    // handled. Return an error.\n    if (currentProvider >= self._providers.length) {\n      end(new Error('Request for method \"' + payload.method + '\" not handled by any subprovider. Please check your subprovider configuration to ensure this method is handled.'))\n    } else {\n      try {\n        var provider = self._providers[currentProvider]\n        provider.handleRequest(payload, next, end)\n      } catch (e) {\n        end(e)\n      }\n    }\n  }\n\n  function end(_error, _result) {\n    error = _error\n    result = _result\n\n    eachSeries(stack, function(fn, callback) {\n\n      if (fn) {\n        fn(error, result, callback)\n      } else {\n        callback()\n      }\n    }, function() {\n\n      var resultObj = {\n        id: payload.id,\n        jsonrpc: payload.jsonrpc,\n        result: result\n      }\n\n      if (error != null) {\n        resultObj.error = {\n          message: error.stack || error.message || error,\n          code: -32000\n        }\n        // respond with both error formats\n        finished(error, resultObj)\n      } else {\n        finished(null, resultObj)\n      }\n    })\n  }\n}\n\n//\n// from remote-data\n//\n\nWeb3ProviderEngine.prototype._setCurrentBlock = function(block){\n  const self = this\n  self.currentBlock = block\n  self.emit('block', block)\n}\n\n// util\n\nfunction toBufferBlock (jsonBlock) {\n  return {\n    number:           ethUtil.toBuffer(jsonBlock.number),\n    hash:             ethUtil.toBuffer(jsonBlock.hash),\n    parentHash:       ethUtil.toBuffer(jsonBlock.parentHash),\n    nonce:            ethUtil.toBuffer(jsonBlock.nonce),\n    mixHash:          ethUtil.toBuffer(jsonBlock.mixHash),\n    sha3Uncles:       ethUtil.toBuffer(jsonBlock.sha3Uncles),\n    logsBloom:        ethUtil.toBuffer(jsonBlock.logsBloom),\n    transactionsRoot: ethUtil.toBuffer(jsonBlock.transactionsRoot),\n    stateRoot:        ethUtil.toBuffer(jsonBlock.stateRoot),\n    receiptsRoot:     ethUtil.toBuffer(jsonBlock.receiptRoot || jsonBlock.receiptsRoot),\n    miner:            ethUtil.toBuffer(jsonBlock.miner),\n    difficulty:       ethUtil.toBuffer(jsonBlock.difficulty),\n    totalDifficulty:  ethUtil.toBuffer(jsonBlock.totalDifficulty),\n    size:             ethUtil.toBuffer(jsonBlock.size),\n    extraData:        ethUtil.toBuffer(jsonBlock.extraData),\n    gasLimit:         ethUtil.toBuffer(jsonBlock.gasLimit),\n    gasUsed:          ethUtil.toBuffer(jsonBlock.gasUsed),\n    timestamp:        ethUtil.toBuffer(jsonBlock.timestamp),\n    transactions:     jsonBlock.transactions,\n  }\n}\n","const createPayload = require('../util/create-payload.js')\n\nmodule.exports = SubProvider\n\n// this is the base class for a subprovider -- mostly helpers\n\n\nfunction SubProvider() {\n\n}\n\nSubProvider.prototype.setEngine = function(engine) {\n  const self = this\n  if (self.engine) return\n  self.engine = engine\n  engine.on('block', function(block) {\n    self.currentBlock = block\n  })\n\n  engine.on('start', function () {\n    self.start()\n  })\n\n  engine.on('stop', function () {\n    self.stop()\n  })\n}\n\nSubProvider.prototype.handleRequest = function(payload, next, end) {\n  throw new Error('Subproviders should override `handleRequest`.')\n}\n\nSubProvider.prototype.emitPayload = function(payload, cb){\n  const self = this\n  self.engine.sendAsync(createPayload(payload), cb)\n}\n\n// dummies for overriding\n\nSubProvider.prototype.stop = function () {}\n\nSubProvider.prototype.start = function () {}\n","const Subprovider = require('./subprovider.js')\n\n// wraps a json-rpc-engine middleware in a subprovider interface\n\nclass JsonRpcEngineMiddlewareSubprovider extends Subprovider {\n\n  // take a constructorFn to call once we have a reference to the engine\n  constructor (constructorFn) {\n    super()\n    if (!constructorFn) throw new Error('JsonRpcEngineMiddlewareSubprovider - no constructorFn specified')\n    this._constructorFn = constructorFn\n  }\n\n  // this is called once the subprovider has been added to the provider engine\n  setEngine (engine) {\n    if (this.middleware) throw new Error('JsonRpcEngineMiddlewareSubprovider - subprovider added to engine twice')\n    const blockTracker = engine._blockTracker\n    const middleware = this._constructorFn({ engine, provider: engine, blockTracker })\n    if (!middleware) throw new Error('JsonRpcEngineMiddlewareSubprovider - _constructorFn did not return middleware')\n    if (typeof middleware !== 'function') throw new Error('JsonRpcEngineMiddlewareSubprovider - specified middleware is not a function')\n    this.middleware = middleware\n  }\n\n  handleRequest (req, provEngNext, provEngEnd) {\n    const res = { id: req.id }\n    this.middleware(req, res, middlewareNext, middlewareEnd)\n\n    function middlewareNext (handler) {\n      provEngNext((err, result, cb) => {\n        // update response object with result or error\n        if (err) {\n          delete res.result\n          res.error = { message: err.message || err }\n        } else {\n          res.result = result\n        }\n        // call middleware's next handler (even if error)\n        if (handler) {\n          handler(cb)\n        } else {\n          cb()\n        }\n      })\n    }\n\n    function middlewareEnd (err) {\n      if (err) return provEngEnd(err)\n      provEngEnd(null, res.result)\n    }\n  }\n\n}\n\nmodule.exports = JsonRpcEngineMiddlewareSubprovider\n","const stringify = require('json-stable-stringify')\n\nmodule.exports = {\n  cacheIdentifierForPayload: cacheIdentifierForPayload,\n  canCache: canCache,\n  blockTagForPayload: blockTagForPayload,\n  paramsWithoutBlockTag: paramsWithoutBlockTag,\n  blockTagParamIndex: blockTagParamIndex,\n  cacheTypeForPayload: cacheTypeForPayload\n}\n\nfunction cacheIdentifierForPayload (payload, skipBlockRef) {\n  const simpleParams = skipBlockRef ? paramsWithoutBlockTag(payload) : payload.params\n  if (canCache(payload)) {\n    return payload.method + ':' + stringify(simpleParams)\n  } else {\n    return null\n  }\n}\n\nfunction canCache (payload) {\n  return cacheTypeForPayload(payload) !== 'never'\n}\n\nfunction blockTagForPayload (payload) {\n  let index = blockTagParamIndex(payload)\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return null\n  }\n\n  return payload.params[index]\n}\n\nfunction paramsWithoutBlockTag (payload) {\n  const index = blockTagParamIndex(payload)\n\n  // Block tag param not passed.\n  if (index >= payload.params.length) {\n    return payload.params\n  }\n\n  // eth_getBlockByNumber has the block tag first, then the optional includeTx? param\n  if (payload.method === 'eth_getBlockByNumber') {\n    return payload.params.slice(1)\n  }\n\n  return payload.params.slice(0, index)\n}\n\nfunction blockTagParamIndex (payload) {\n  switch (payload.method) {\n    // blockTag is at index 2\n    case 'eth_getStorageAt':\n      return 2\n    // blockTag is at index 1\n    case 'eth_getBalance':\n    case 'eth_getCode':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n      return 1\n    // blockTag is at index 0\n    case 'eth_getBlockByNumber':\n      return 0\n    // there is no blockTag\n    default:\n      return undefined\n  }\n}\n\nfunction cacheTypeForPayload (payload) {\n  switch (payload.method) {\n    // cache permanently\n    case 'web3_clientVersion':\n    case 'web3_sha3':\n    case 'eth_protocolVersion':\n    case 'eth_getBlockTransactionCountByHash':\n    case 'eth_getUncleCountByBlockHash':\n    case 'eth_getCode':\n    case 'eth_getBlockByHash':\n    case 'eth_getTransactionByHash':\n    case 'eth_getTransactionByBlockHashAndIndex':\n    case 'eth_getTransactionReceipt':\n    case 'eth_getUncleByBlockHashAndIndex':\n    case 'eth_getCompilers':\n    case 'eth_compileLLL':\n    case 'eth_compileSolidity':\n    case 'eth_compileSerpent':\n    case 'shh_version':\n    case 'test_permaCache':\n      return 'perma'\n\n    // cache until fork\n    case 'eth_getBlockByNumber':\n    case 'eth_getBlockTransactionCountByNumber':\n    case 'eth_getUncleCountByBlockNumber':\n    case 'eth_getTransactionByBlockNumberAndIndex':\n    case 'eth_getUncleByBlockNumberAndIndex':\n    case 'test_forkCache':\n      return 'fork'\n\n    // cache for block\n    case 'eth_gasPrice':\n    case 'eth_blockNumber':\n    case 'eth_getBalance':\n    case 'eth_getStorageAt':\n    case 'eth_getTransactionCount':\n    case 'eth_call':\n    case 'eth_estimateGas':\n    case 'eth_getFilterLogs':\n    case 'eth_getLogs':\n    case 'test_blockCache':\n      return 'block'\n\n    // never cache\n    case 'net_version':\n    case 'net_peerCount':\n    case 'net_listening':\n    case 'eth_syncing':\n    case 'eth_sign':\n    case 'eth_coinbase':\n    case 'eth_mining':\n    case 'eth_hashrate':\n    case 'eth_accounts':\n    case 'eth_sendTransaction':\n    case 'eth_sendRawTransaction':\n    case 'eth_newFilter':\n    case 'eth_newBlockFilter':\n    case 'eth_newPendingTransactionFilter':\n    case 'eth_uninstallFilter':\n    case 'eth_getFilterChanges':\n    case 'eth_getWork':\n    case 'eth_submitWork':\n    case 'eth_submitHashrate':\n    case 'db_putString':\n    case 'db_getString':\n    case 'db_putHex':\n    case 'db_getHex':\n    case 'shh_post':\n    case 'shh_newIdentity':\n    case 'shh_hasIdentity':\n    case 'shh_newGroup':\n    case 'shh_addToGroup':\n    case 'shh_newFilter':\n    case 'shh_uninstallFilter':\n    case 'shh_getFilterChanges':\n    case 'shh_getMessages':\n    case 'test_neverCache':\n      return 'never'\n  }\n}\n","const cacheUtils = require('./cache-utils.js')\nconst createAsyncMiddleware = require('json-rpc-engine/src/createAsyncMiddleware')\n// `<nil>` comes from https://github.com/ethereum/go-ethereum/issues/16925\nconst emptyValues = [undefined, null, '\\u003cnil\\u003e']\n\nmodule.exports = createBlockCacheMiddleware\n\n\nfunction createBlockCacheMiddleware(opts = {}) {\n  // validate options\n  const { blockTracker } = opts\n  if (!blockTracker) throw new Error('createBlockCacheMiddleware - No BlockTracker specified')\n\n  // create caching strategies\n  const blockCache = new BlockCacheStrategy()\n  const strategies = {\n    perma: blockCache,\n    block: blockCache,\n    fork: blockCache,\n  }\n\n  return createAsyncMiddleware(async (req, res, next) => {\n    // allow cach to be skipped if so specified\n    if (req.skipCache) {\n      return next()\n    }\n    // check type and matching strategy\n    const type = cacheUtils.cacheTypeForPayload(req)\n    const strategy = strategies[type]\n    // If there's no strategy in place, pass it down the chain.\n    if (!strategy) {\n      return next()\n    }\n    // If the strategy can't cache this request, ignore it.\n    if (!strategy.canCacheRequest(req)) {\n      return next()\n    }\n\n    // get block reference (number or keyword)\n    let blockTag = cacheUtils.blockTagForPayload(req)\n    if (!blockTag) blockTag = 'latest'\n\n    // get exact block number\n    let requestedBlockNumber\n    if (blockTag === 'earliest') {\n      // this just exists for symmetry with \"latest\"\n      requestedBlockNumber = '0x00'\n    } else if (blockTag === 'latest') {\n      // fetch latest block number\n      const latestBlockNumber = await blockTracker.getLatestBlock()\n      // clear all cache before latest block\n      blockCache.clearBefore(latestBlockNumber)\n      requestedBlockNumber = latestBlockNumber\n    } else {\n      // We have a hex number\n      requestedBlockNumber = blockTag\n    }\n\n    // end on a hit, continue on a miss\n    const cacheResult = await strategy.get(req, requestedBlockNumber)\n    if (cacheResult === undefined) {\n      // cache miss\n      // wait for other middleware to handle request\n      await next()\n      // add result to cache\n      await strategy.set(req, requestedBlockNumber, res.result)\n    } else {\n      // fill in result from cache\n      res.result = cacheResult\n    }\n  })\n}\n\n\n//\n// Cache Strategies\n//\n\nclass BlockCacheStrategy {\n  \n  constructor () {\n    this.cache = {}\n  }\n\n  getBlockCacheForPayload (payload, blockNumberHex) {\n    const blockNumber = Number.parseInt(blockNumberHex, 16)\n    let blockCache = this.cache[blockNumber]\n    // create new cache if necesary\n    if (!blockCache) {\n      const newCache = {}\n      this.cache[blockNumber] = newCache\n      blockCache = newCache\n    }\n    return blockCache\n  }\n\n  async get (payload, requestedBlockNumber) {\n    // lookup block cache\n    const blockCache = this.getBlockCacheForPayload(payload, requestedBlockNumber)\n    if (!blockCache) return\n    // lookup payload in block cache\n    const identifier = cacheUtils.cacheIdentifierForPayload(payload, true)\n    const cached = blockCache[identifier]\n    // may be undefined\n    return cached\n  }\n\n  async set (payload, requestedBlockNumber, result) {\n    // check if we can cached this result\n    const canCache = this.canCacheResult(payload, result)\n    if (!canCache) return\n    // set the value in the cache\n    const blockCache = this.getBlockCacheForPayload(payload, requestedBlockNumber)\n    const identifier = cacheUtils.cacheIdentifierForPayload(payload, true)\n    blockCache[identifier] = result\n  }\n\n  canCacheRequest (payload) {\n    // check request method\n    if (!cacheUtils.canCache(payload)) {\n      return false\n    }\n    // check blockTag\n    const blockTag = cacheUtils.blockTagForPayload(payload)\n    if (blockTag === 'pending') {\n      return false\n    }\n    // can be cached\n    return true\n  }\n\n  canCacheResult (payload, result) {\n    // never cache empty values (e.g. undefined)\n    if (emptyValues.includes(result)) return\n    // check if transactions have block reference before caching\n    if (['eth_getTransactionByHash', 'eth_getTransactionReceipt'].includes(payload.method)) {\n      if (!result || !result.blockHash || result.blockHash === '0x0000000000000000000000000000000000000000000000000000000000000000') {\n        return false\n      }\n    }\n    // otherwise true\n    return true\n  }\n\n  // removes all block caches with block number lower than `oldBlockHex`\n  clearBefore (oldBlockHex){\n    const self = this\n    const oldBlockNumber = Number.parseInt(oldBlockHex, 16)\n    // clear old caches\n    Object.keys(self.cache)\n      .map(Number)\n      .filter(num => num < oldBlockNumber)\n      .forEach(num => delete self.cache[num])\n  }\n\n}\n","const ProviderSubprovider = require('./json-rpc-engine-middleware')\nconst createBlockCacheMiddleware = require('@portis/eth-json-rpc-middleware/block-cache')\n\nclass BlockCacheSubprovider extends ProviderSubprovider {\n  constructor(opts) {\n    super(({ blockTracker }) => createBlockCacheMiddleware(Object.assign({ blockTracker }, opts)))\n  }\n}\n\nmodule.exports = BlockCacheSubprovider\n","const inherits = require('util').inherits\nconst Subprovider = require('./subprovider.js')\n\nmodule.exports = FixtureProvider\n\ninherits(FixtureProvider, Subprovider)\n\nfunction FixtureProvider(staticResponses){\n  const self = this\n  staticResponses = staticResponses || {}\n  self.staticResponses = staticResponses\n}\n\nFixtureProvider.prototype.handleRequest = function(payload, next, end){\n  const self = this\n  var staticResponse = self.staticResponses[payload.method]\n  // async function\n  if ('function' === typeof staticResponse) {\n    staticResponse(payload, next, end)\n  // static response - null is valid response\n  } else if (staticResponse !== undefined) {\n    // return result asynchronously\n    setTimeout(() => end(null, staticResponse))\n  // no prepared response - skip\n  } else {\n    next()\n  }\n}\n","const ProviderSubprovider = require('./json-rpc-engine-middleware')\nconst createFilterMiddleware = require('eth-json-rpc-filters')\n\nclass SubscriptionsSubprovider extends ProviderSubprovider {\n  constructor() {\n    super(({ blockTracker, provider, engine }) => {\n      return createFilterMiddleware({ blockTracker, provider })\n    })\n  }\n}\n\nmodule.exports = SubscriptionsSubprovider\n","const createPayload = require('./create-payload.js')\n\nmodule.exports = estimateGas\n\n/*\n\nThis is a work around for https://github.com/ethereum/go-ethereum/issues/2577\n\n*/\n\n\nfunction estimateGas(provider, txParams, cb) {\n  provider.sendAsync(createPayload({\n    method: 'eth_estimateGas',\n    params: [txParams]\n  }), function(err, res){\n    if (err) {\n      // handle simple value transfer case\n      if (err.message === 'no contract code at given address') {\n        return cb(null, '0xcf08')\n      } else {\n        return cb(err)        \n      }\n    }\n    cb(null, res.result)\n  })\n}","/*\n * Emulate 'eth_accounts' / 'eth_sendTransaction' using 'eth_sendRawTransaction'\n *\n * The two callbacks a user needs to implement are:\n * - getAccounts() -- array of addresses supported\n * - signTransaction(tx) -- sign a raw transaction object\n */\n\nconst waterfall = require('async/waterfall')\nconst parallel = require('async/parallel')\nconst inherits = require('util').inherits\nconst ethUtil = require('ethereumjs-util')\nconst sigUtil = require('eth-sig-util')\nconst extend = require('xtend')\nconst Semaphore = require('semaphore')\nconst Subprovider = require('./subprovider.js')\nconst estimateGas = require('../util/estimate-gas.js')\nconst hexRegex = /^[0-9A-Fa-f]+$/g\n\nmodule.exports = HookedWalletSubprovider\n\n// handles the following RPC methods:\n//   eth_coinbase\n//   eth_accounts\n//   eth_sendTransaction\n//   eth_sign\n//   eth_signTypedData\n//   personal_sign\n//   personal_ecRecover\n//   parity_postTransaction\n//   parity_checkRequest\n//   parity_defaultAccount\n\n//\n// Tx Signature Flow\n//\n// handleRequest: eth_sendTransaction\n//   validateTransaction (basic validity check)\n//     validateSender (checks that sender is in accounts)\n//   processTransaction (sign tx and submit to network)\n//     approveTransaction (UI approval hook)\n//     checkApproval\n//     finalizeAndSubmitTx (tx signing)\n//       nonceLock.take (bottle neck to ensure atomic nonce)\n//         fillInTxExtras (set fallback gasPrice, nonce, etc)\n//         signTransaction (perform the signature)\n//         publishTransaction (publish signed tx to network)\n//\n\n\ninherits(HookedWalletSubprovider, Subprovider)\n\nfunction HookedWalletSubprovider(opts){\n  const self = this\n  // control flow\n  self.nonceLock = Semaphore(1)\n\n  // data lookup\n  if (opts.getAccounts) self.getAccounts = opts.getAccounts\n  // high level override\n  if (opts.processTransaction) self.processTransaction = opts.processTransaction\n  if (opts.processMessage) self.processMessage = opts.processMessage\n  if (opts.processPersonalMessage) self.processPersonalMessage = opts.processPersonalMessage\n  if (opts.processTypedMessage) self.processTypedMessage = opts.processTypedMessage\n  if (opts.processTypedMessageV3) self.processTypedMessageV3 = opts.processTypedMessageV3\n  // approval hooks\n  self.approveTransaction = opts.approveTransaction || self.autoApprove\n  self.approveMessage = opts.approveMessage || self.autoApprove\n  self.approvePersonalMessage = opts.approvePersonalMessage || self.autoApprove\n  self.approveTypedMessage = opts.approveTypedMessage || self.autoApprove\n  self.approveTypedMessageV3 = opts.approveTypedMessageV3 || self.autoApprove\n  // actually perform the signature\n  if (opts.signTransaction) self.signTransaction = opts.signTransaction  || mustProvideInConstructor('signTransaction')\n  if (opts.signMessage) self.signMessage = opts.signMessage  || mustProvideInConstructor('signMessage')\n  if (opts.signPersonalMessage) self.signPersonalMessage = opts.signPersonalMessage  || mustProvideInConstructor('signPersonalMessage')\n  if (opts.signTypedMessage) self.signTypedMessage = opts.signTypedMessage  || mustProvideInConstructor('signTypedMessage')\n  if (opts.signTypedMessageV3) self.signTypedMessageV3 = opts.signTypedMessageV3  || mustProvideInConstructor('signTypedMessageV3')\n  if (opts.recoverPersonalSignature) self.recoverPersonalSignature = opts.recoverPersonalSignature\n  // publish to network\n  if (opts.publishTransaction) self.publishTransaction = opts.publishTransaction\n  // gas options\n  self.estimateGas = opts.estimateGas || self.estimateGas\n  self.getGasPrice = opts.getGasPrice || self.getGasPrice\n}\n\nHookedWalletSubprovider.prototype.handleRequest = function(payload, next, end){\n  const self = this\n  self._parityRequests = {}\n  self._parityRequestCount = 0\n\n  // switch statement is not block scoped\n  // sp we cant repeat var declarations\n  let txParams, msgParams, extraParams\n  let message, address\n\n  switch(payload.method) {\n\n    case 'eth_coinbase':\n      // process normally\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        let result = accounts[0] || null\n        end(null, result)\n      })\n      return\n\n    case 'eth_accounts':\n      // process normally\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        end(null, accounts)\n      })\n      return\n\n    case 'eth_sendTransaction':\n      txParams = payload.params[0]\n      waterfall([\n        (cb) => self.validateTransaction(txParams, cb),\n        (cb) => self.processTransaction(txParams, cb),\n      ], end)\n      return\n\n    case 'eth_signTransaction':\n      txParams = payload.params[0]\n      waterfall([\n        (cb) => self.validateTransaction(txParams, cb),\n        (cb) => self.processSignTransaction(txParams, cb),\n      ], end)\n      return\n\n    case 'eth_sign':\n      // process normally\n      if (resemblesData(payload.params[1]) && resemblesAddress(payload.params[0])) {\n        address = payload.params[0]\n        message = payload.params[1]\n      } else {\n        message = payload.params[0]\n        address = payload.params[1]\n      }\n\n      // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n      // good place for metadata\n      extraParams = payload.params[2] || {}\n      msgParams = extend(extraParams, {\n        from: address,\n        data: message,\n      })\n      waterfall([\n        (cb) => self.validateMessage(msgParams, cb),\n        (cb) => self.processMessage(msgParams, cb),\n      ], end)\n      return\n\n    case 'personal_sign':\n      return (function(){\n        // process normally\n        const first = payload.params[0]\n        const second = payload.params[1]\n\n        // We initially incorrectly ordered these parameters.\n        // To gracefully respect users who adopted this API early,\n        // we are currently gracefully recovering from the wrong param order\n        // when it is clearly identifiable.\n        //\n        // That means when the first param is definitely an address,\n        // and the second param is definitely not, but is hex.\n        if (resemblesData(second) && resemblesAddress(first)) {\n          let warning = `The eth_personalSign method requires params ordered `\n          warning += `[message, address]. This was previously handled incorrectly, `\n          warning += `and has been corrected automatically. `\n          warning += `Please switch this param order for smooth behavior in the future.`\n          console.warn(warning)\n\n          address = payload.params[0]\n          message = payload.params[1]\n        } else {\n          message = payload.params[0]\n          address = payload.params[1]\n        }\n\n        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n        // good place for metadata\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          from: address,\n          data: message,\n        })\n        waterfall([\n          (cb) => self.validatePersonalMessage(msgParams, cb),\n          (cb) => self.processPersonalMessage(msgParams, cb),\n        ], end)\n      })()\n\n    case 'personal_ecRecover':\n      return (function(){\n        message = payload.params[0]\n        let signature = payload.params[1]\n        // non-standard \"extraParams\" to be appended to our \"msgParams\" obj\n        // good place for metadata\n        extraParams = payload.params[2] || {}\n        msgParams = extend(extraParams, {\n          sig: signature,\n          data: message,\n        })\n        self.recoverPersonalSignature(msgParams, end)\n      })()\n\n    case 'eth_signTypedData':\n      // process normally\n      if (!resemblesAddress(payload.params[1]) && resemblesAddress(payload.params[0])) {\n        address = payload.params[0]\n        message = payload.params[1]\n      } else {\n        message = payload.params[0]\n        address = payload.params[1]\n      }\n\n      extraParams = payload.params[2] || {}\n      msgParams = extend(extraParams, {\n        from: address,\n        data: message,\n      })\n      waterfall([\n        (cb) => self.validateTypedMessage(msgParams, cb),\n        (cb) => self.processTypedMessage(msgParams, cb),\n      ], end)\n      return\n\n    case 'eth_signTypedData_v3':\n      // process normally\n      if (!resemblesAddress(payload.params[1]) && resemblesAddress(payload.params[0])) {\n        address = payload.params[0]\n        message = payload.params[1]\n      } else {\n        message = payload.params[0]\n        address = payload.params[1]\n      }\n\n      extraParams = payload.params[2] || {}\n      msgParams = extend(extraParams, {\n        from: address,\n        data: message,\n      })\n      waterfall([\n        (cb) => self.validateTypedMessageV3(msgParams, cb),\n        (cb) => self.processTypedMessageV3(msgParams, cb),\n      ], end)\n      return\n\n    case 'parity_postTransaction':\n      txParams = payload.params[0]\n      self.parityPostTransaction(txParams, end)\n      return\n\n    case 'parity_postSign':\n      address = payload.params[0]\n      message = payload.params[1]\n      self.parityPostSign(address, message, end)\n      return\n\n    case 'parity_checkRequest':\n      return (function(){\n        const requestId = payload.params[0]\n        self.parityCheckRequest(requestId, end)\n      })()\n\n    case 'parity_defaultAccount':\n      self.getAccounts(function(err, accounts){\n        if (err) return end(err)\n        const account = accounts[0] || null\n        end(null, account)\n      })\n      return\n\n    default:\n      next()\n      return\n\n  }\n}\n\n//\n// data lookup\n//\n\nHookedWalletSubprovider.prototype.getAccounts = function(cb) {\n  cb(null, [])\n}\n\n\n//\n// \"process\" high level flow\n//\n\nHookedWalletSubprovider.prototype.processTransaction = function(txParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTransaction(txParams, cb),\n    (didApprove, cb) => self.checkApproval('transaction', didApprove, cb),\n    (cb) => self.finalizeAndSubmitTx(txParams, cb),\n  ], cb)\n}\n\n\nHookedWalletSubprovider.prototype.processSignTransaction = function(txParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTransaction(txParams, cb),\n    (didApprove, cb) => self.checkApproval('transaction', didApprove, cb),\n    (cb) => self.finalizeTx(txParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processPersonalMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approvePersonalMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signPersonalMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processTypedMessage = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTypedMessage(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signTypedMessage(msgParams, cb),\n  ], cb)\n}\n\nHookedWalletSubprovider.prototype.processTypedMessageV3 = function(msgParams, cb) {\n  const self = this\n  waterfall([\n    (cb) => self.approveTypedMessageV3(msgParams, cb),\n    (didApprove, cb) => self.checkApproval('message', didApprove, cb),\n    (cb) => self.signTypedMessageV3(msgParams, cb),\n  ], cb)\n}\n\n//\n// approval\n//\n\nHookedWalletSubprovider.prototype.autoApprove = function(txParams, cb) {\n  cb(null, true)\n}\n\nHookedWalletSubprovider.prototype.checkApproval = function(type, didApprove, cb) {\n  cb( didApprove ? null : new Error('User denied '+type+' signature.') )\n}\n\n//\n// parity\n//\n\nHookedWalletSubprovider.prototype.parityPostTransaction = function(txParams, cb) {\n  const self = this\n\n  // get next id\n  const count = self._parityRequestCount\n  const reqId = `0x${count.toString(16)}`\n  self._parityRequestCount++\n\n  self.emitPayload({\n    method: 'eth_sendTransaction',\n    params: [txParams],\n  }, function(error, res){\n    if (error) {\n      self._parityRequests[reqId] = { error }\n      return\n    }\n    const txHash = res.result\n    self._parityRequests[reqId] = txHash\n  })\n\n  cb(null, reqId)\n}\n\n\nHookedWalletSubprovider.prototype.parityPostSign = function(address, message, cb) {\n  const self = this\n\n  // get next id\n  const count = self._parityRequestCount\n  const reqId = `0x${count.toString(16)}`\n  self._parityRequestCount++\n\n  self.emitPayload({\n    method: 'eth_sign',\n    params: [address, message],\n  }, function(error, res){\n    if (error) {\n      self._parityRequests[reqId] = { error }\n      return\n    }\n    const result = res.result\n    self._parityRequests[reqId] = result\n  })\n\n  cb(null, reqId)\n}\n\nHookedWalletSubprovider.prototype.parityCheckRequest = function(reqId, cb) {\n  const self = this\n  const result = self._parityRequests[reqId] || null\n  // tx not handled yet\n  if (!result) return cb(null, null)\n  // tx was rejected (or other error)\n  if (result.error) return cb(result.error)\n  // tx sent\n  cb(null, result)\n}\n\n//\n// signature and recovery\n//\n\nHookedWalletSubprovider.prototype.recoverPersonalSignature = function(msgParams, cb) {\n  let senderHex\n  try {\n    senderHex = sigUtil.recoverPersonalSignature(msgParams)\n  } catch (err) {\n    return cb(err)\n  }\n  cb(null, senderHex)\n}\n\n//\n// validation\n//\n\nHookedWalletSubprovider.prototype.validateTransaction = function(txParams, cb){\n  const self = this\n  // shortcut: undefined sender is invalid\n  if (txParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign transaction.`))\n  self.validateSender(txParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign transaction for this address: \"${txParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateMessage = function(msgParams, cb){\n  const self = this\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign message.`))\n  self.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validatePersonalMessage = function(msgParams, cb){\n  const self = this\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign personal message.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined message - message required to sign personal message.`))\n  if (!isValidHex(msgParams.data)) return cb(new Error(`HookedWalletSubprovider - validateMessage - message was not encoded as hex.`))\n  self.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateTypedMessage = function(msgParams, cb){\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign typed data.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined data - message required to sign typed data.`))\n  this.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateTypedMessageV3 = function(msgParams, cb){\n  if (msgParams.from === undefined) return cb(new Error(`Undefined address - from address required to sign typed data.`))\n  if (msgParams.data === undefined) return cb(new Error(`Undefined data - message required to sign typed data.`))\n  this.validateSender(msgParams.from, function(err, senderIsValid){\n    if (err) return cb(err)\n    if (!senderIsValid) return cb(new Error(`Unknown address - unable to sign message for this address: \"${msgParams.from}\"`))\n    cb()\n  })\n}\n\nHookedWalletSubprovider.prototype.validateSender = function(senderAddress, cb){\n  const self = this\n  // shortcut: undefined sender is invalid\n  if (!senderAddress) return cb(null, false)\n  self.getAccounts(function(err, accounts){\n    if (err) return cb(err)\n    const senderIsValid = (accounts.map(toLowerCase).indexOf(senderAddress.toLowerCase()) !== -1)\n    cb(null, senderIsValid)\n  })\n}\n\n//\n// tx helpers\n//\n\nHookedWalletSubprovider.prototype.finalizeAndSubmitTx = function(txParams, cb) {\n  const self = this\n  // can only allow one tx to pass through this flow at a time\n  // so we can atomically consume a nonce\n  self.nonceLock.take(function(){\n    waterfall([\n      self.fillInTxExtras.bind(self, txParams),\n      self.signTransaction.bind(self),\n      self.publishTransaction.bind(self),\n    ], function(err, txHash){\n      self.nonceLock.leave()\n      if (err) return cb(err)\n      cb(null, txHash)\n    })\n  })\n}\n\nHookedWalletSubprovider.prototype.finalizeTx = function(txParams, cb) {\n  const self = this\n  // can only allow one tx to pass through this flow at a time\n  // so we can atomically consume a nonce\n  self.nonceLock.take(function(){\n    waterfall([\n      self.fillInTxExtras.bind(self, txParams),\n      self.signTransaction.bind(self),\n    ], function(err, signedTx){\n      self.nonceLock.leave()\n      if (err) return cb(err)\n      cb(null, {raw: signedTx, tx: txParams})\n    })\n  })\n}\n\nHookedWalletSubprovider.prototype.publishTransaction = function(rawTx, cb) {\n  const self = this\n  self.emitPayload({\n    method: 'eth_sendRawTransaction',\n    params: [rawTx],\n  }, function(err, res){\n    if (err) return cb(err)\n    cb(null, res.result)\n  })\n}\n\nHookedWalletSubprovider.prototype.estimateGas = function(txParams, cb) {\n  const self = this\n  estimateGas(self.engine, txParams, cb)\n}\n\nHookedWalletSubprovider.prototype.getGasPrice = function(cb) {\n  const self = this\n  self.emitPayload({ method: 'eth_gasPrice', params: [] }, function (err, res) {\n    if (err) return cb(err)\n    cb(null, res.result)\n  })\n}\n\nHookedWalletSubprovider.prototype.fillInTxExtras = function(txParams, cb){\n  const self = this\n  const address = txParams.from\n  // console.log('fillInTxExtras - address:', address)\n\n  const tasks = {}\n\n  if (txParams.gasPrice === undefined) {\n    // console.log(\"need to get gasprice\")\n    tasks.gasPrice = self.getGasPrice.bind(self)\n  }\n\n  if (txParams.nonce === undefined) {\n    // console.log(\"need to get nonce\")\n    tasks.nonce = self.emitPayload.bind(self, { method: 'eth_getTransactionCount', params: [address, 'pending'] })\n  }\n\n  if (txParams.gas === undefined) {\n    // console.log(\"need to get gas\")\n    tasks.gas = self.estimateGas.bind(self, cloneTxParams(txParams))\n  }\n\n  parallel(tasks, function(err, taskResults) {\n    if (err) return cb(err)\n\n    const result = {}\n    if (taskResults.gasPrice) result.gasPrice = taskResults.gasPrice\n    if (taskResults.nonce) result.nonce = taskResults.nonce.result\n    if (taskResults.gas) result.gas = taskResults.gas\n\n    cb(null, extend(txParams, result))\n  })\n}\n\n// util\n\n// we use this to clean any custom params from the txParams\nfunction cloneTxParams(txParams){\n  return {\n    from: txParams.from,\n    to: txParams.to,\n    value: txParams.value,\n    data: txParams.data,\n    gas: txParams.gas,\n    gasPrice: txParams.gasPrice,\n    nonce: txParams.nonce,\n  }\n}\n\nfunction toLowerCase(string){\n  return string.toLowerCase()\n}\n\nfunction resemblesAddress (string) {\n  const fixed = ethUtil.addHexPrefix(string)\n  const isValid = ethUtil.isValidAddress(fixed)\n  return isValid\n}\n\n// Returns true if resembles hex data\n// but definitely not a valid address.\nfunction resemblesData (string) {\n  const fixed = ethUtil.addHexPrefix(string)\n  const isValidAddress = ethUtil.isValidAddress(fixed)\n  return !isValidAddress && isValidHex(string)\n}\n\nfunction isValidHex(data) {\n  const isString = typeof data === 'string'\n  if (!isString) return false\n  const isHexPrefixed = data.slice(0,2) === '0x'\n  if (!isHexPrefixed) return false\n  const nonPrefixed = data.slice(2)\n  const isValid = nonPrefixed.match(hexRegex)\n  return isValid\n}\n\nfunction mustProvideInConstructor(methodName) {\n  return function(params, cb) {\n    cb(new Error('ProviderEngine - HookedWalletSubprovider - Must provide \"' + methodName + '\" fn in constructor options'))\n  }\n}\n","const inherits = require('util').inherits\nconst Transaction = require('ethereumjs-tx')\nconst ethUtil = require('ethereumjs-util')\nconst Subprovider = require('./subprovider.js')\nconst blockTagForPayload = require('../util/rpc-cache-utils').blockTagForPayload\n\nmodule.exports = NonceTrackerSubprovider\n\n// handles the following RPC methods:\n//   eth_getTransactionCount (pending only)\n//\n// observes the following RPC methods:\n//   eth_sendRawTransaction\n//   evm_revert (to clear the nonce cache)\n\ninherits(NonceTrackerSubprovider, Subprovider)\n\nfunction NonceTrackerSubprovider(opts){\n  const self = this\n\n  self.nonceCache = {}\n}\n\nNonceTrackerSubprovider.prototype.handleRequest = function(payload, next, end){\n  const self = this\n\n  switch(payload.method) {\n\n    case 'eth_getTransactionCount':\n      var blockTag = blockTagForPayload(payload)\n      var address = payload.params[0].toLowerCase()\n      var cachedResult = self.nonceCache[address]\n      // only handle requests against the 'pending' blockTag\n      if (blockTag === 'pending') {\n        // has a result\n        if (cachedResult) {\n          end(null, cachedResult)\n        // fallthrough then populate cache\n        } else {\n          next(function(err, result, cb){\n            if (err) return cb()\n            if (self.nonceCache[address] === undefined) {\n              self.nonceCache[address] = result\n            }\n            cb()\n          })\n        }\n      } else {\n        next()\n      }\n      return\n\n    case 'eth_sendRawTransaction':\n      // allow the request to continue normally\n      next(function(err, result, cb){\n        // only update local nonce if tx was submitted correctly\n        if (err) return cb()\n        // parse raw tx\n        var rawTx = payload.params[0]\n        var stripped = ethUtil.stripHexPrefix(rawTx)\n        var rawData = Buffer.from(ethUtil.stripHexPrefix(rawTx), 'hex')\n        var tx = new Transaction(Buffer.from(ethUtil.stripHexPrefix(rawTx), 'hex'))\n        // extract address\n        var address = '0x'+tx.getSenderAddress().toString('hex').toLowerCase()\n        // extract nonce and increment\n        var nonce = ethUtil.bufferToInt(tx.nonce)\n        nonce++\n        // hexify and normalize\n        var hexNonce = nonce.toString(16)\n        if (hexNonce.length%2) hexNonce = '0'+hexNonce\n        hexNonce = '0x'+hexNonce\n        // dont update our record on the nonce until the submit was successful\n        // update cache\n        self.nonceCache[address] = hexNonce\n        cb()\n      })\n      return\n\n   // Clear cache on a testrpc revert\n   case 'evm_revert':\n      self.nonceCache = {}\n      next()\n      return\n\n    default:\n      next()\n      return\n\n  }\n}\n","const ProviderSubprovider = require('./json-rpc-engine-middleware')\nconst createSubscriptionManager = require('eth-json-rpc-filters/subscriptionManager')\n\nclass SubscriptionsSubprovider extends ProviderSubprovider {\n  constructor() {\n    super(({ blockTracker, provider, engine }) => {\n      const { events, middleware } = createSubscriptionManager({ blockTracker, provider })\n      // forward subscription events on the engine\n      events.on('notification', (data) => engine.emit('data', null, data))\n      // return the subscription install/remove middleware\n      return middleware\n    })\n  }\n}\n\nmodule.exports = SubscriptionsSubprovider\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.ERR_NOT_IN_IFRAME = exports.ERR_CONNECTION_TIMEOUT = exports.ERR_CONNECTION_DESTROYED = void 0;\nvar HANDSHAKE = 'handshake';\nvar HANDSHAKE_REPLY = 'handshake-reply';\nvar CALL = 'call';\nvar REPLY = 'reply';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar MESSAGE = 'message';\nvar DATA_CLONE_ERROR = 'DataCloneError';\nvar ERR_CONNECTION_DESTROYED = 'ConnectionDestroyed';\nexports.ERR_CONNECTION_DESTROYED = ERR_CONNECTION_DESTROYED;\nvar ERR_CONNECTION_TIMEOUT = 'ConnectionTimeout';\nexports.ERR_CONNECTION_TIMEOUT = ERR_CONNECTION_TIMEOUT;\nvar ERR_NOT_IN_IFRAME = 'NotInIframe';\nexports.ERR_NOT_IN_IFRAME = ERR_NOT_IN_IFRAME;\nvar DEFAULT_PORTS = {\n  'http:': '80',\n  'https:': '443'\n};\nvar URL_REGEX = /^(https?:)?\\/\\/([^/:]+)(:(\\d+))?/;\nvar Penpal = {\n  ERR_CONNECTION_DESTROYED: ERR_CONNECTION_DESTROYED,\n  ERR_CONNECTION_TIMEOUT: ERR_CONNECTION_TIMEOUT,\n  ERR_NOT_IN_IFRAME: ERR_NOT_IN_IFRAME,\n\n  /**\n   * Promise implementation.\n   * @type {Constructor}\n   */\n  Promise: function () {\n    try {\n      return window ? window.Promise : null;\n    } catch (e) {\n      return null;\n    }\n  }(),\n\n  /**\n   * Whether debug messages should be logged.\n   * @type {boolean}\n   */\n  debug: false\n};\n/**\n * @return {number} A unique ID (not universally unique)\n */\n\nvar generateId = function () {\n  var id = 0;\n  return function () {\n    return ++id;\n  };\n}();\n/**\n * Logs a message.\n * @param {...*} args One or more items to log\n */\n\n\nvar log = function log() {\n  if (Penpal.debug) {\n    var _console;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    (_console = console).log.apply(_console, ['[Penpal]'].concat(args)); // eslint-disable-line no-console\n\n  }\n};\n/**\n * Converts a URL into an origin.\n * @param {string} url\n * @return {string} The URL's origin\n */\n\n\nvar getOriginFromUrl = function getOriginFromUrl(url) {\n  var location = document.location;\n  var regexResult = URL_REGEX.exec(url);\n  var protocol;\n  var hostname;\n  var port;\n\n  if (regexResult) {\n    // It's an absolute URL. Use the parsed info.\n    // regexResult[1] will be undefined if the URL starts with //\n    protocol = regexResult[1] ? regexResult[1] : location.protocol;\n    hostname = regexResult[2];\n    port = regexResult[4];\n  } else {\n    // It's a relative path. Use the current location's info.\n    protocol = location.protocol;\n    hostname = location.hostname;\n    port = location.port;\n  } // If the port is the default for the protocol, we don't want to add it to the origin string\n  // or it won't match the message's event.origin.\n\n\n  var portSuffix = port && port !== DEFAULT_PORTS[protocol] ? \":\".concat(port) : '';\n  return \"\".concat(protocol, \"//\").concat(hostname).concat(portSuffix);\n};\n/**\n * A simplified promise class only used internally for when destroy() is called. This is\n * used to destroy connections synchronously while promises typically resolve asynchronously.\n *\n * @param {Function} executor\n * @returns {Object}\n * @constructor\n */\n\n\nvar DestructionPromise = function DestructionPromise(executor) {\n  var handlers = [];\n  executor(function () {\n    handlers.forEach(function (handler) {\n      handler();\n    });\n  });\n  return {\n    then: function then(handler) {\n      handlers.push(handler);\n    }\n  };\n};\n/**\n * Converts an error object into a plain object.\n * @param {Error} Error object.\n * @returns {Object}\n */\n\n\nvar serializeError = function serializeError(_ref) {\n  var name = _ref.name,\n      message = _ref.message,\n      stack = _ref.stack;\n  return {\n    name: name,\n    message: message,\n    stack: stack\n  };\n};\n/**\n * Converts a plain object into an error object.\n * @param {Object} Object with error properties.\n * @returns {Error}\n */\n\n\nvar deserializeError = function deserializeError(obj) {\n  var deserializedError = new Error();\n  Object.keys(obj).forEach(function (key) {\n    return deserializedError[key] = obj[key];\n  });\n  return deserializedError;\n};\n/**\n * Augments an object with methods that match those defined by the remote. When these methods are\n * called, a \"call\" message will be sent to the remote, the remote's corresponding method will be\n * executed, and the method's return value will be returned via a message.\n * @param {Object} callSender Sender object that should be augmented with methods.\n * @param {Object} info Information about the local and remote windows.\n * @param {Array} methodNames Names of methods available to be called on the remote.\n * @param {Promise} destructionPromise A promise resolved when destroy() is called on the penpal\n * connection.\n * @returns {Object} The call sender object with methods that may be called.\n */\n\n\nvar connectCallSender = function connectCallSender(callSender, info, methodNames, destructionPromise) {\n  var localName = info.localName,\n      local = info.local,\n      remote = info.remote,\n      remoteOrigin = info.remoteOrigin;\n  var destroyed = false;\n  log(\"\".concat(localName, \": Connecting call sender\"));\n\n  var createMethodProxy = function createMethodProxy(methodName) {\n    return function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      log(\"\".concat(localName, \": Sending \").concat(methodName, \"() call\"));\n\n      if (destroyed) {\n        var error = new Error(\"Unable to send \".concat(methodName, \"() call due \") + \"to destroyed connection\");\n        error.code = ERR_CONNECTION_DESTROYED;\n        throw error;\n      }\n\n      return new Penpal.Promise(function (resolve, reject) {\n        var id = generateId();\n\n        var handleMessageEvent = function handleMessageEvent(event) {\n          if (event.source === remote && event.origin === remoteOrigin && event.data.penpal === REPLY && event.data.id === id) {\n            log(\"\".concat(localName, \": Received \").concat(methodName, \"() reply\"));\n            local.removeEventListener(MESSAGE, handleMessageEvent);\n            var returnValue = event.data.returnValue;\n\n            if (event.data.returnValueIsError) {\n              returnValue = deserializeError(returnValue);\n            }\n\n            (event.data.resolution === FULFILLED ? resolve : reject)(returnValue);\n          }\n        };\n\n        local.addEventListener(MESSAGE, handleMessageEvent);\n        remote.postMessage({\n          penpal: CALL,\n          id: id,\n          methodName: methodName,\n          args: args\n        }, remoteOrigin);\n      });\n    };\n  };\n\n  destructionPromise.then(function () {\n    destroyed = true;\n  });\n  methodNames.reduce(function (api, methodName) {\n    api[methodName] = createMethodProxy(methodName);\n    return api;\n  }, callSender);\n};\n/**\n * Listens for \"call\" messages coming from the remote, executes the corresponding method, and\n * responds with the return value.\n * @param {Object} info Information about the local and remote windows.\n * @param {Object} methods The keys are the names of the methods that can be called by the remote\n * while the values are the method functions.\n * @param {Promise} destructionPromise A promise resolved when destroy() is called on the penpal\n * connection.\n * @returns {Function} A function that may be called to disconnect the receiver.\n */\n\n\nvar connectCallReceiver = function connectCallReceiver(info, methods, destructionPromise) {\n  var localName = info.localName,\n      local = info.local,\n      remote = info.remote,\n      remoteOrigin = info.remoteOrigin;\n  var destroyed = false;\n  log(\"\".concat(localName, \": Connecting call receiver\"));\n\n  var handleMessageEvent = function handleMessageEvent(event) {\n    if (event.source === remote && event.origin === remoteOrigin && event.data.penpal === CALL) {\n      var _event$data = event.data,\n          methodName = _event$data.methodName,\n          args = _event$data.args,\n          id = _event$data.id;\n      log(\"\".concat(localName, \": Received \").concat(methodName, \"() call\"));\n\n      if (methodName in methods) {\n        var createPromiseHandler = function createPromiseHandler(resolution) {\n          return function (returnValue) {\n            log(\"\".concat(localName, \": Sending \").concat(methodName, \"() reply\"));\n\n            if (destroyed) {\n              // It's possible to throw an error here, but it would need to be thrown asynchronously\n              // and would only be catchable using window.onerror. This is because the consumer\n              // is merely returning a value from their method and not calling any function\n              // that they could wrap in a try-catch. Even if the consumer were to catch the error,\n              // the value of doing so is questionable. Instead, we'll just log a message.\n              log(\"\".concat(localName, \": Unable to send \").concat(methodName, \"() reply due to destroyed connection\"));\n              return;\n            }\n\n            var message = {\n              penpal: REPLY,\n              id: id,\n              resolution: resolution,\n              returnValue: returnValue\n            };\n\n            if (resolution === REJECTED && returnValue instanceof Error) {\n              message.returnValue = serializeError(returnValue);\n              message.returnValueIsError = true;\n            }\n\n            try {\n              remote.postMessage(message, remoteOrigin);\n            } catch (err) {\n              // If a consumer attempts to send an object that's not cloneable (e.g., window),\n              // we want to ensure the receiver's promise gets rejected.\n              if (err.name === DATA_CLONE_ERROR) {\n                remote.postMessage({\n                  penpal: REPLY,\n                  id: id,\n                  resolution: REJECTED,\n                  returnValue: serializeError(err),\n                  returnValueIsError: true\n                }, remoteOrigin);\n              }\n\n              throw err;\n            }\n          };\n        };\n\n        new Penpal.Promise(function (resolve) {\n          return resolve(methods[methodName].apply(methods, args));\n        }).then(createPromiseHandler(FULFILLED), createPromiseHandler(REJECTED));\n      }\n    }\n  };\n\n  local.addEventListener(MESSAGE, handleMessageEvent);\n  destructionPromise.then(function () {\n    destroyed = true;\n    local.removeEventListener(MESSAGE, handleMessageEvent);\n  });\n};\n/**\n * @typedef {Object} Child\n * @property {Promise} promise A promise which will be resolved once a connection has\n * been established.\n * @property {HTMLIframeElement} iframe The created iframe element.\n * @property {Function} destroy A method that, when called, will remove the iframe element from\n * the DOM and clean up event listeners.\n */\n\n/**\n * Creates an iframe, loads a webpage into the URL, and attempts to establish communication with\n * the iframe.\n * @param {Object} options\n * @param {string} options.url The URL of the webpage that should be loaded into the created iframe.\n * @param {HTMLElement} [options.appendTo] The container to which the iframe should be appended.\n * @param {Object} [options.methods={}] Methods that may be called by the iframe.\n * @param {Number} [options.timeout] The amount of time, in milliseconds, Penpal should wait\n * for the child to respond before rejecting the connection promise.\n * @return {Child}\n */\n\n\nPenpal.connectToChild = function (_ref2) {\n  var url = _ref2.url,\n      appendTo = _ref2.appendTo,\n      _ref2$methods = _ref2.methods,\n      methods = _ref2$methods === void 0 ? {} : _ref2$methods,\n      timeout = _ref2.timeout;\n  var destroy;\n  var connectionDestructionPromise = new DestructionPromise(function (resolveConnectionDestructionPromise) {\n    destroy = resolveConnectionDestructionPromise;\n  });\n  var parent = window;\n  var iframe = document.createElement('iframe');\n  (appendTo || document.body).appendChild(iframe);\n  connectionDestructionPromise.then(function () {\n    if (iframe.parentNode) {\n      iframe.parentNode.removeChild(iframe);\n    }\n  });\n  var child = iframe.contentWindow || iframe.contentDocument.parentWindow;\n  var childOrigin = getOriginFromUrl(url);\n  var promise = new Penpal.Promise(function (resolveConnectionPromise, reject) {\n    var connectionTimeoutId;\n\n    if (timeout !== undefined) {\n      connectionTimeoutId = setTimeout(function () {\n        var error = new Error(\"Connection to child timed out after \".concat(timeout, \"ms\"));\n        error.code = ERR_CONNECTION_TIMEOUT;\n        reject(error);\n        destroy();\n      }, timeout);\n    } // We resolve the promise with the call sender. If the child reconnects (for example, after\n    // refreshing or navigating to another page that uses Penpal, we'll update the call sender\n    // with methods that match the latest provided by the child.\n\n\n    var callSender = {};\n    var receiverMethodNames;\n    var destroyCallReceiver;\n\n    var handleMessage = function handleMessage(event) {\n      if (event.source === child && event.origin === childOrigin && event.data.penpal === HANDSHAKE) {\n        log('Parent: Received handshake, sending reply');\n        event.source.postMessage({\n          penpal: HANDSHAKE_REPLY,\n          methodNames: Object.keys(methods)\n        }, event.origin);\n        var info = {\n          localName: 'Parent',\n          local: parent,\n          remote: child,\n          remoteOrigin: event.origin\n        }; // If the child reconnected, we need to destroy the previous call receiver before setting\n        // up a new one.\n\n        if (destroyCallReceiver) {\n          destroyCallReceiver();\n        } // When this promise is resolved, it will destroy the call receiver (stop listening to\n        // method calls from the child) and delete its methods off the call sender.\n\n\n        var callReceiverDestructionPromise = new DestructionPromise(function (resolveCallReceiverDestructionPromise) {\n          connectionDestructionPromise.then(resolveCallReceiverDestructionPromise);\n          destroyCallReceiver = resolveCallReceiverDestructionPromise;\n        });\n        connectCallReceiver(info, methods, callReceiverDestructionPromise); // If the child reconnected, we need to remove the methods from the previous call receiver\n        // off the sender.\n\n        if (receiverMethodNames) {\n          receiverMethodNames.forEach(function (receiverMethodName) {\n            delete callSender[receiverMethodName];\n          });\n        }\n\n        receiverMethodNames = event.data.methodNames;\n        connectCallSender(callSender, info, receiverMethodNames, connectionDestructionPromise);\n        clearTimeout(connectionTimeoutId);\n        resolveConnectionPromise(callSender);\n      }\n    };\n\n    parent.addEventListener(MESSAGE, handleMessage);\n    connectionDestructionPromise.then(function () {\n      parent.removeEventListener(MESSAGE, handleMessage);\n      var error = new Error('Connection destroyed');\n      error.code = ERR_CONNECTION_DESTROYED;\n      reject(error);\n    });\n    log('Parent: Loading iframe');\n    iframe.src = url;\n  });\n  return {\n    promise: promise,\n    iframe: iframe,\n    destroy: destroy\n  };\n};\n/**\n * @typedef {Object} Parent\n * @property {Promise} promise A promise which will be resolved once a connection has\n * been established.\n */\n\n/**\n * Attempts to establish communication with the parent window.\n * @param {Object} options\n * @param {string} [options.parentOrigin=*] Valid parent origin used to restrict communication.\n * @param {Object} [options.methods={}] Methods that may be called by the parent window.\n * @param {Number} [options.timeout] The amount of time, in milliseconds, Penpal should wait\n * for the parent to respond before rejecting the connection promise.\n * @return {Parent}\n */\n\n\nPenpal.connectToParent = function () {\n  var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref3$parentOrigin = _ref3.parentOrigin,\n      parentOrigin = _ref3$parentOrigin === void 0 ? '*' : _ref3$parentOrigin,\n      _ref3$methods = _ref3.methods,\n      methods = _ref3$methods === void 0 ? {} : _ref3$methods,\n      timeout = _ref3.timeout;\n\n  if (window === window.top) {\n    var error = new Error('connectToParent() must be called within an iframe');\n    error.code = ERR_NOT_IN_IFRAME;\n    throw error;\n  }\n\n  var destroy;\n  var connectionDestructionPromise = new DestructionPromise(function (resolveConnectionDestructionPromise) {\n    destroy = resolveConnectionDestructionPromise;\n  });\n  var child = window;\n  var parent = child.parent;\n  var promise = new Penpal.Promise(function (resolveConnectionPromise, reject) {\n    var connectionTimeoutId;\n\n    if (timeout !== undefined) {\n      connectionTimeoutId = setTimeout(function () {\n        var error = new Error(\"Connection to parent timed out after \".concat(timeout, \"ms\"));\n        error.code = ERR_CONNECTION_TIMEOUT;\n        reject(error);\n        destroy();\n      }, timeout);\n    }\n\n    var handleMessageEvent = function handleMessageEvent(event) {\n      if ((parentOrigin === '*' || parentOrigin === event.origin) && event.source === parent && event.data.penpal === HANDSHAKE_REPLY) {\n        log('Child: Received handshake reply');\n        child.removeEventListener(MESSAGE, handleMessageEvent);\n        var info = {\n          localName: 'Child',\n          local: child,\n          remote: parent,\n          remoteOrigin: event.origin\n        };\n        var callSender = {};\n        connectCallReceiver(info, methods, connectionDestructionPromise);\n        connectCallSender(callSender, info, event.data.methodNames, connectionDestructionPromise);\n        clearTimeout(connectionTimeoutId);\n        resolveConnectionPromise(callSender);\n      }\n    };\n\n    child.addEventListener(MESSAGE, handleMessageEvent);\n    connectionDestructionPromise.then(function () {\n      child.removeEventListener(MESSAGE, handleMessageEvent);\n      var error = new Error('Connection destroyed');\n      error.code = ERR_CONNECTION_DESTROYED;\n      reject(error);\n    });\n    log('Child: Sending handshake');\n    parent.postMessage({\n      penpal: HANDSHAKE,\n      methodNames: Object.keys(methods)\n    }, parentOrigin);\n  });\n  return {\n    promise: promise,\n    destroy: destroy\n  };\n};\n\nvar _default = Penpal;\nexports.default = _default;","export function networkAdapter(network, gasRelay) {\n    var networkObj = typeof network === 'string' ? Object.assign({}, networks[network]) : network;\n    if (typeof networkObj !== 'object') {\n        throw new Error(\"[Portis] illegal 'network' parameter. Read more about it here: https://docs.portis.io/#/configuration?id=network\");\n    }\n    if (!networkObj.nodeUrl) {\n        throw new Error(\"[Portis] 'nodeUrl' is required. Read more about it here: https://docs.portis.io/#/configuration?id=network\");\n    }\n    if (gasRelay && !networkObj.gasRelayHubAddress) {\n        throw new Error(\"[Portis] can't find default gas relay hub for \" + network);\n    }\n    if (typeof network === 'string' && !gasRelay) {\n        delete networkObj.gasRelayHubAddress;\n    }\n    return networkObj;\n}\nvar networks = {\n    mainnet: {\n        nodeUrl: 'https://mainnet.infura.io/v3/faa4639b090f46499f29d894da0551a0',\n        chainId: '1',\n        gasRelayHubAddress: '0xD216153c06E857cD7f72665E0aF1d7D82172F494',\n    },\n    ropsten: {\n        nodeUrl: 'https://ropsten.infura.io/v3/faa4639b090f46499f29d894da0551a0',\n        chainId: '3',\n        gasRelayHubAddress: '0xD216153c06E857cD7f72665E0aF1d7D82172F494',\n    },\n    rinkeby: {\n        nodeUrl: 'https://rinkeby.infura.io/v3/faa4639b090f46499f29d894da0551a0',\n        chainId: '4',\n        gasRelayHubAddress: '0xD216153c06E857cD7f72665E0aF1d7D82172F494',\n    },\n    goerli: {\n        nodeUrl: 'https://goerli.prylabs.net',\n        chainId: '5',\n    },\n    ubiq: {\n        nodeUrl: 'https://rpc1.ubiqscan.io',\n        chainId: '8',\n    },\n    thundercoreTestnet: {\n        nodeUrl: 'https://testnet-rpc.thundercore.com:8544',\n        chainId: '18',\n    },\n    orchid: {\n        nodeUrl: 'https://public-node.rsk.co',\n        chainId: '30',\n    },\n    orchidTestnet: {\n        nodeUrl: 'https://public-node.testnet.rsk.co',\n        chainId: '31',\n    },\n    kovan: {\n        nodeUrl: 'https://kovan.infura.io/v3/faa4639b090f46499f29d894da0551a0',\n        chainId: '42',\n        gasRelayHubAddress: '0xD216153c06E857cD7f72665E0aF1d7D82172F494',\n    },\n    classic: {\n        nodeUrl: 'https://ethereumclassic.network',\n        chainId: '61',\n    },\n    sokol: {\n        nodeUrl: 'https://sokol.poa.network',\n        chainId: '77',\n    },\n    core: {\n        nodeUrl: 'https://core.poa.network',\n        chainId: '99',\n    },\n    xdai: {\n        nodeUrl: 'https://dai.poa.network',\n        chainId: '100',\n        gasRelayHubAddress: '0xD216153c06E857cD7f72665E0aF1d7D82172F494',\n    },\n    thundercore: {\n        nodeUrl: 'https://mainnet-rpc.thundercore.com',\n        chainId: '108',\n    },\n    fuse: {\n        nodeUrl: 'https://rpc.fusenet.io',\n        chainId: '122',\n    },\n    lightstreams: {\n        nodeUrl: 'https://node.mainnet.lightstreams.io',\n        chainId: '163',\n    },\n    maticAlpha: {\n        nodeUrl: 'https://alpha.ethereum.matic.network',\n        chainId: '4626',\n    },\n    maticTestnet: {\n        nodeUrl: 'https://testnet2.matic.network',\n        chainId: '8995',\n    },\n};\n//# sourceMappingURL=networks.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar _a = require('ethereumjs-util'), addHexPrefix = _a.addHexPrefix, stripHexPrefix = _a.stripHexPrefix, BN = _a.BN;\nvar SIMPLE_GAS_COST = '0x5208'; // Hex for 21000, cost of a simple send.\nexport function getTxGas(query, txParams) {\n    return __awaiter(this, void 0, void 0, function () {\n        var block, _a, safeGas, simpleSend, gasLimitSpecified, gas, error_1;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4 /*yield*/, query.getBlockByNumber('latest', false)];\n                case 1:\n                    block = _b.sent();\n                    return [4 /*yield*/, safeTxGas(query, txParams, block.gasLimit)];\n                case 2:\n                    _a = _b.sent(), safeGas = _a.safeGas, simpleSend = _a.simpleSend, gasLimitSpecified = _a.gasLimitSpecified;\n                    if (simpleSend || gasLimitSpecified) {\n                        return [2 /*return*/, safeGas];\n                    }\n                    _b.label = 3;\n                case 3:\n                    _b.trys.push([3, 5, , 6]);\n                    return [4 /*yield*/, estimateTxGas(query, txParams, block.gasLimit, safeGas)];\n                case 4:\n                    gas = _b.sent();\n                    return [2 /*return*/, gas];\n                case 5:\n                    error_1 = _b.sent();\n                    return [2 /*return*/, safeGas];\n                case 6: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction safeTxGas(query, txParams, blockGasLimitHex) {\n    return __awaiter(this, void 0, void 0, function () {\n        var gasLimitSpecified, recipient, hasRecipient, code, codeIsEmpty, err, blockGasLimitBN, saferGasLimitBN;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    gasLimitSpecified = Boolean(txParams.gas);\n                    // if it is, use that value\n                    if (gasLimitSpecified) {\n                        return [2 /*return*/, { safeGas: txParams.gas, simpleSend: false, gasLimitSpecified: true }];\n                    }\n                    recipient = txParams.to;\n                    hasRecipient = Boolean(recipient);\n                    if (!hasRecipient) return [3 /*break*/, 2];\n                    return [4 /*yield*/, query.getCode(recipient)];\n                case 1:\n                    code = _a.sent();\n                    codeIsEmpty = !code || code === '0x' || code === '0x0';\n                    if (codeIsEmpty) {\n                        // if there's data in the params, but there's no contract code, it's not a valid transaction\n                        if (txParams.data) {\n                            err = new Error('Trying to call a function on a non-contract address');\n                            throw err;\n                        }\n                        // This is a standard ether simple send, gas requirement is exactly 21k\n                        return [2 /*return*/, { safeGas: SIMPLE_GAS_COST, simpleSend: true, gasLimitSpecified: false }];\n                    }\n                    _a.label = 2;\n                case 2:\n                    blockGasLimitBN = hexToBn(blockGasLimitHex);\n                    saferGasLimitBN = BnMultiplyByFraction(blockGasLimitBN, 19, 20);\n                    return [2 /*return*/, { safeGas: bnToHex(saferGasLimitBN), simpleSend: false, gasLimitSpecified: false }];\n            }\n        });\n    });\n}\nfunction estimateTxGas(query, txParams, blockGasLimitHex, safeGas) {\n    return __awaiter(this, void 0, void 0, function () {\n        var estimatedGas, _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    txParams.gas = safeGas;\n                    _a = addHexPrefix;\n                    return [4 /*yield*/, query.estimateGas(txParams)];\n                case 1:\n                    estimatedGas = _a.apply(void 0, [_b.sent()]);\n                    return [2 /*return*/, addGasBuffer(estimatedGas, blockGasLimitHex)];\n            }\n        });\n    });\n}\nfunction addGasBuffer(initialGasLimitHex, blockGasLimitHex) {\n    var initialGasLimitBn = hexToBn(initialGasLimitHex);\n    var blockGasLimitBn = hexToBn(blockGasLimitHex);\n    var upperGasLimitBn = blockGasLimitBn.muln(0.9);\n    var bufferedGasLimitBn = initialGasLimitBn.muln(1.5);\n    // if initialGasLimit is above blockGasLimit, dont modify it\n    if (initialGasLimitBn.gt(upperGasLimitBn))\n        return bnToHex(initialGasLimitBn);\n    // if bufferedGasLimit is below blockGasLimit, use bufferedGasLimit\n    if (bufferedGasLimitBn.lt(upperGasLimitBn))\n        return bnToHex(bufferedGasLimitBn);\n    // otherwise use blockGasLimit\n    return bnToHex(upperGasLimitBn);\n}\nfunction hexToBn(inputHex) {\n    return new BN(stripHexPrefix(inputHex), 16);\n}\nfunction bnToHex(inputBn) {\n    return addHexPrefix(inputBn.toString(16));\n}\nfunction BnMultiplyByFraction(targetBN, numerator, denominator) {\n    var numBN = new BN(numerator);\n    var denomBN = new BN(denominator);\n    return targetBN.mul(numBN).div(denomBN);\n}\n//# sourceMappingURL=getTxGas.js.map","var Query = /** @class */ (function () {\n    function Query(provider) {\n        this.provider = provider;\n    }\n    Query.prototype.getBlockByNumber = function (blockNumber, fullTransaction) {\n        return this.sendAsync('eth_getBlockByNumber', blockNumber, fullTransaction);\n    };\n    Query.prototype.getCode = function (address, blockNumber) {\n        if (blockNumber === void 0) { blockNumber = 'latest'; }\n        return this.sendAsync('eth_getCode', address, blockNumber);\n    };\n    Query.prototype.estimateGas = function (txParams) {\n        return this.sendAsync('eth_estimateGas', txParams);\n    };\n    Query.prototype.sendAsync = function (methodName) {\n        var _this = this;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        return new Promise(function (resolve, reject) {\n            _this.provider.sendAsync({\n                id: 42,\n                jsonrpc: '2.0',\n                method: methodName,\n                params: args,\n            }, function (error, response) {\n                if (error) {\n                    reject(error);\n                }\n                else {\n                    resolve(response.result);\n                }\n            });\n        });\n    };\n    return Query;\n}());\nexport { Query };\n//# sourceMappingURL=query.js.map","var loaded = false;\nexport function onWindowLoad() {\n    return new Promise(function (resolve) {\n        if (loaded) {\n            resolve();\n        }\n        else if (['loaded', 'interactive', 'complete'].indexOf(document.readyState) > -1) {\n            loaded = true;\n            resolve();\n        }\n        else {\n            window.addEventListener('load', function () {\n                loaded = true;\n                resolve();\n            }, false);\n        }\n    });\n}\n//# sourceMappingURL=onWindowLoad.js.map","/**\n *\n *\n * @class Blockchain\n */\nclass Blockchain {\n  /**\n   * Creates an instance of Blockchain.\n   * @param {String} name - Blockchain's name.\n   * @param {String} netID - Network identifier.\n   * @memberof Blockchain\n   */\n  constructor(name, netID) {\n    this.name = name;\n    this.netID = netID;\n  }\n  /**\n   *\n   * toJSON\n   * @returns {JSON} - A JSON object.\n   * @memberof Blockchain\n   */\n  toJSON() {\n    return JSON.parse('{ \"name\":\"' + \n    this.name + '\", \"netID\":\"' + \n    this.netID + '\"}')\n  }\n}\n\nmodule.exports = {\n  Blockchain\n}","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\nvar isBuffer = require('is-buffer');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && navigator.product === 'ReactNative') {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (typeof result[key] === 'object' && typeof val === 'object') {\n      result[key] = merge(result[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim\n};\n","/*!\n * Determine if an object is a Buffer\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n\nmodule.exports = function isBuffer (obj) {\n  return obj != null && obj.constructor != null &&\n    typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n  error.request = request;\n  error.response = response;\n  return error;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%40/gi, '@').\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n  (function standardBrowserEnv() {\n    var msie = /(msie|trident)/i.test(navigator.userAgent);\n    var urlParsingNode = document.createElement('a');\n    var originURL;\n\n    /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n    function resolveURL(url) {\n      var href = url;\n\n      if (msie) {\n        // IE needs attribute set twice to normalize properties\n        urlParsingNode.setAttribute('href', href);\n        href = urlParsingNode.href;\n      }\n\n      urlParsingNode.setAttribute('href', href);\n\n      // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n      return {\n        href: urlParsingNode.href,\n        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n        host: urlParsingNode.host,\n        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n        hostname: urlParsingNode.hostname,\n        port: urlParsingNode.port,\n        pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n                  urlParsingNode.pathname :\n                  '/' + urlParsingNode.pathname\n      };\n    }\n\n    originURL = resolveURL(window.location.href);\n\n    /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n    return function isURLSameOrigin(requestURL) {\n      var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n      return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n    };\n  })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return function isURLSameOrigin() {\n      return true;\n    };\n  })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n  (function standardBrowserEnv() {\n    return {\n      write: function write(name, value, expires, path, domain, secure) {\n        var cookie = [];\n        cookie.push(name + '=' + encodeURIComponent(value));\n\n        if (utils.isNumber(expires)) {\n          cookie.push('expires=' + new Date(expires).toGMTString());\n        }\n\n        if (utils.isString(path)) {\n          cookie.push('path=' + path);\n        }\n\n        if (utils.isString(domain)) {\n          cookie.push('domain=' + domain);\n        }\n\n        if (secure === true) {\n          cookie.push('secure');\n        }\n\n        document.cookie = cookie.join('; ');\n      },\n\n      read: function read(name) {\n        var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n        return (match ? decodeURIComponent(match[3]) : null);\n      },\n\n      remove: function remove(name) {\n        this.write(name, '', Date.now() - 86400000);\n      }\n    };\n  })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n  (function nonStandardBrowserEnv() {\n    return {\n      write: function write() {},\n      read: function read() { return null; },\n      remove: function remove() {}\n    };\n  })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar buildURL = require('./../helpers/buildURL');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password || '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    request.open(config.method.toUpperCase(), buildURL(config.url, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      reject(createError('timeout of ' + config.timeout + 'ms exceeded', config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      var cookies = require('./../helpers/cookies');\n\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(config.url)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (config.withCredentials) {\n      request.withCredentials = true;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (requestData === undefined) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  // Note: status is not exposed by XDomainRequest\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\nvar isAbsoluteURL = require('./../helpers/isAbsoluteURL');\nvar combineURLs = require('./../helpers/combineURLs');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Support baseURL config\n  if (config.baseURL && !isAbsoluteURL(config.url)) {\n    config.url = combineURLs(config.baseURL, config.url);\n  }\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers || {}\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\nvar defaults = require('./../defaults');\nvar utils = require('./../utils');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = utils.merge({\n      url: arguments[0]\n    }, arguments[1]);\n  }\n\n  config = utils.merge(defaults, {method: 'get'}, this.defaults, config);\n  config.method = config.method.toLowerCase();\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(utils.merge(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(utils.merge(defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","module.exports = require('./lib/axios');","// Url's and Paths    \nconst dispatchNodeURL = \"https://dispatch.pokt.network\";\nconst dispatchPath = \"/v1/dispatch\";\nconst reportPath = \"/v1/report\";\nconst relayPath = \"/v1/relay/\";\n\n\nmodule.exports = {\n    dispatchNodeURL,\n    dispatchPath,\n    reportPath,\n    relayPath\n}","const axios = require('axios');\nconst constants = require(\"../utils/constants.js\");\nconst httpsRequestProtocol = \"https://\";\nconst httpRequestProtocol = \"http://\";\n// Dispatch\n/**\n *\n *\n * @class Node\n */\nclass Node {\n    /**\n     * Creates an instance of Node.\n     * @param {String} network - Network name.\n     * @param {String} netID - Network Identifier.\n     * @param {String} ipPort - Ip and port string (\"10.0.0.1:80\")\n     * @memberof Node\n     */\n    constructor(network, netID, ipPort) {\n        this.network = network;\n        this.netID = netID;\n        var ipPortArr = ipPort.split(\":\");\n        this.ip = ipPortArr[0];\n        this.port = ipPortArr[1];\n        if (ipPort.includes(httpsRequestProtocol) || ipPort.includes(httpRequestProtocol)) {\n            this.ipPort = ipPort;\n        } else {\n            if (this.port === \"443\" || this.port === 443) {\n                this.ipPort = httpsRequestProtocol + ipPort;\n            } else {\n                this.ipPort = httpRequestProtocol + ipPort;\n            }\n        }\n    }\n\n    /**\n     *\n     * Verify if all properties are valid\n     * @returns {boolean} - True or false.\n     * @memberof Node\n     */\n    isValid() {\n        for (var property in this) {\n            if (!this.hasOwnProperty(property) || this[property] == \"\") {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     *\n     * Checks if params are equal to stored properties\n     * @param {String} netID - Network Identifier.\n     * @param {String} network - Network name.\n     * @returns {boolean} - True or false.\n     * @memberof Node\n     */\n    isEqual(netID, network) {\n        if (this.netID == netID.toString() && this.network == network.toString()) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     *\n     * Sends a relay to a service node\n     * @param {Relay} relay - Relay object with the information.\n     * @param {callback} callback - callback handler.\n     * @returns {Object} - Object with the response.\n     * @memberof Node\n     */\n    async sendRelay(relay, callback) {\n        try {\n            const axiosInstance = axios.create({\n                baseURL: this.ipPort,\n                timeout: relay.configuration.requestTimeOut,\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n\n            var response = await axiosInstance.post(constants.relayPath,\n                relay.toJSON()\n            );\n\n            if (response.status == 200 && response.data != null) {\n                var result = response.data;\n\n                if (callback) {\n                    callback(result, null);\n                    return;\n                } else {\n                    return result;\n                }\n            } else {\n                if (callback) {\n                    callback(null, new Error(\"Failed to send relay with error: \" + response.data));\n                    return;\n                } else {\n                    return new Error(\"Failed to send relay with error: \" + response.data);\n                }\n            }\n        } catch (error) {\n            if (callback) {\n                callback(null, new Error(\"Failed to send relay with error: \" + error));\n                return;\n            } else {\n                return new Error(\"Failed to send relay with error: \" + error);\n            }\n        }\n    }\n}\n\nmodule.exports = {\n    Node\n}","const axios = require('axios');\nconst Node = require(\"./node.js\").Node;\nconst constants = require(\"../utils/constants.js\");\n\n// Dispatch\n/**\n *\n *\n * @class Dispatch\n */\nclass Dispatch {\n  /**\n   *Creates an instance of Dispatch.\n   * @param {Configuration} configuration - Configuration object.\n   * @memberof Dispatch\n   */\n  constructor(configuration) {\n    this.configuration = configuration;\n    this.axiosInstance = axios.create({\n      baseURL: constants.dispatchNodeURL,\n      path: constants.dispatchPath,\n      timeout: this.configuration.requestTimeOut,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n  }\n  /**\n   *\n   * blockchain object to JSON\n   * @returns {JSON} - JSON Array with the blockchain list.\n   * @memberof Dispatch\n   */\n  blockchainsJSON() {\n    var blockchainArray = []\n    this.configuration.blockchains.forEach(element => {\n      blockchainArray.push(element);\n    });\n    return blockchainArray\n  }\n  /**\n   *\n   * Retrieves a list of service nodes\n   * @param {callback} callback\n   * @returns {Node} - A Node object list.\n   * @memberof Dispatch\n   */\n  async retrieveServiceNodes(callback) {\n    try {\n      var dispatch = this;\n      var response = null;\n\n      response = await this.axiosInstance.post(constants.dispatchPath, {\n        \"DevID\": dispatch.configuration.devID,\n        \"Blockchains\": dispatch.blockchainsJSON()\n      });\n\n      if (response != null && response.status == 200 && response.data != null) {\n        var nodes = this.parseDispatchResponse(response.data);\n\n        if (callback) {\n          callback(nodes, null);\n          return;\n        } else {\n          return nodes;\n        }\n      } else {\n        if (callback) {\n          callback(null, new Error(\"Failed to retrieve service nodes with error: \" + response.data));\n          return;\n        } else {\n          return new Error(\"Failed to retrieve service nodes with error: \" + response.data);\n        }\n      }\n    } catch (err) {\n      if (callback) {\n        callback(null, new Error(\"Failed to retrieve service nodes with error: \" + err));\n        return;\n      } else {\n        return new Error(\"Failed to retrieve service nodes with error: \" + err);\n      }\n    }\n  }\n\n  /**\n   *\n   * Parse the response from the dispatcher\n   * @param {Object} response\n   * @returns {Node} - A Node object list.\n   * @memberof Dispatch\n   */\n  parseDispatchResponse(response) {\n    try {\n      // Variables\n      var nodes = [];\n\n      if (Array.isArray(response)) {\n        // Iterate through the array for different networks results\n        response.forEach(element => {\n          \n          var network = element.name;\n          var netID = element.netid;\n\n          if (element.ips) {\n            // Create a Node object for each item inside the dataKey object, IP:PORT\n            element.ips.forEach(ipPort => {\n              var node = new Node(network, netID, ipPort);\n              nodes.push(node);\n            });\n          }\n        });\n      } else {\n\n        var network = response.name;\n        var netID = response.netid;\n\n        if (response.ips) {\n          // Create a Node object for each item inside the dataKey object, IP:PORT\n          response.ips.forEach(ipPort => {\n            var node = new Node(network, netID, ipPort);\n            nodes.push(node);\n          });\n        }\n\n      }\n      return nodes;\n\n    } catch (error) {\n      return new Error(\"Failed to parsed service nodes with error: \" + error);\n    }\n\n  }\n\n}\n\nmodule.exports = {\n  Dispatch\n}","// Relay\n/**\n *\n *\n * @class Relay\n */\nclass Relay {\n\t/**\n\t * Creates an instance of Relay.\n\t * @param {Blockchain} blockchain - A blockchain object.\n\t * @param {String} netID - Network identifier.\n\t * @param {String} data - Data string.\n\t * @param {Configuration} configuration - Configuration object.\n\t * @memberof Relay\n\t */\n\tconstructor(blockchain, netID, data, configuration) {\n\t\tthis.blockchain = blockchain;\n\t\tthis.netID = netID;\n\t\tthis.data = data;\n\t\tthis.configuration = configuration;\n\t}\n\n\t/**\n\t *\n\t * Parse properties to a JSON Object.\n\t * @returns {JSON} - A JSON Object.\n\t * @memberof Relay\n\t */\n\ttoJSON(){\n\t\treturn {\n\t\t\t\"Blockchain\": this.blockchain,\n\t\t\t\"NetID\": this.netID,\n\t\t\t\"Data\": this.data,\n\t\t\t\"DevID\": this.configuration.devID\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * Verifies if the Relay is valid\n\t * @returns {boolean} - True or false\n\t * @memberof Relay\n\t */\n\tisValid(){\n\t\tfor (var property in this) {\n\t\t\tif (!this.hasOwnProperty(property) || this[property] == \"\") {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n}\n\nmodule.exports = {\n\tRelay\n}","const axios = require('axios');\nconst constants = require(\"../utils/constants.js\");\n\n// Report\n/**\n *\n *\n * @class Report\n */\nclass Report {\n\t/**\n   * Creates an instance of Report.\n   * @param {String} ip - Internet protocol address of the node.\n   * @param {String} message - Message describing the report.\n   * @param {Configuration} configuration - Configuration object.\n   * @memberof Report\n   */\n  constructor(ip, message, configuration) {\n\t\tthis.ip = ip;\n        this.message = message;\n        this.configuration = configuration;\n    }\n    /**\n     *\n\t   * Parse properties to a JSON Object.\n\t   * @returns {JSON} - A JSON Object.\n     * @memberof Report\n     */\n    toJSON(){\n      return {\n        \"IP\": this.ip,\n        \"Message\": this.message\n      }\n    }\n    /**\n     *\n\t   * Verifies if the Report is valid\n\t   * @returns {boolean} - True or false\n     * @memberof Report\n     */\n    isValid(){\n      for (var property in this) {\n        if (!this.hasOwnProperty(property) || this[property] == \"\") {\n          return false;\n        }\n      }\n      return true;\n    }\n    /**\n     *\n     * Sends a report to the dispatcher.\n     * @param {callback} callback\n     * @returns {String} - An string with the result.\n     * @memberof Report\n     */\n    async send(callback){\n        const axiosInstance = axios.create({\n            baseURL: constants.dispatchNodeURL,\n            timeout: this.configuration.requestTimeOut,\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          });\n    \n          var response = await axiosInstance.post(constants.reportPath,\n            this.toJSON()\n          );\n    \n          if (response.status == 200 && response.data != null) {\n            if (callback) {\n              callback(null, response.data);\n              return;\n            }\n            return response.data;\n          } else {\n            if (callback) {\n              callback(new Error(\"Failed to send report with error: \" + response.data));\n              return;\n            }\n            return new Error(\"Failed to send report with error: \" + response.data);\n          }\n    }\n}\n\nmodule.exports = {\n\tReport\n}","// Wallet - Model\nclass Wallet {\n\t/**\n\t * Creates an instance of Wallet.\n\t * @param {String} address - Public Key string.\n\t * @param {String} privateKey - Private Key string.\n\t * @param {String} network - Network name.\n\t * @param {String} networkID - Network Identifier.\n\t * @param {Object} data - Optional data object.\n\t * @memberof Wallet\n\t */\n\tconstructor(address, privateKey, network, networkID, data) {\n\t\tthis.address = address;\n\t\tthis.privateKey = privateKey;\n\t\tthis.network = network;\n\t\tthis.networkID = networkID;\n\t\tthis.data = data;\n\t}\n}\n\nmodule.exports = {\n\tWallet\n}","module.exports = Object.assign(\n        module.exports, \n        require('./blockchain'), \n        require('./dispatch'), \n        require('./node'), \n        require('./relay'),\n        require('./report'),\n        require('./wallet')\n    )","const Models = require(\"./models/index\");\nconst Blockchain = Models.Blockchain;\nconst Dispatch = Models.Dispatch;\nconst Relay = Models.Relay;\nconst Report = Models.Report;\n\n/**\n *\n *\n * @class Configuration\n */\nclass Configuration {\n  /**\n   * Configuration stores settings.\n   * @constructor\n   * @param {string} devID - Unique developer ID.\n   * @param {string} blockchains - Blockchain class type list.\n   * @param {string} maxNodes - (optional) Maximun amount of nodes to store in instance, default 5.\n   * @param {string} requestTimeOut - (optional) Maximun timeout for every request in miliseconds, default 10000.\n   */\n  constructor(devID, blockchains, maxNodes, requestTimeOut) {\n    this.devID = devID;\n    this.blockchains = blockchains;\n    this.maxNodes = maxNodes || 5;\n    this.nodes = [];\n    this.requestTimeOut = requestTimeOut || 10000;\n    this.dispatch = null;\n  }\n  /**\n   * Verify if the nodes list is empty\n   *\n   * @returns {Boolean}\n   * @memberof Configuration\n   */\n  nodesIsEmpty() {\n    if (this.nodes == null || this.nodes.length == 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n/**\n *\n *\n * @class Pocket\n */\nclass Pocket {\n  /**\n   * Creates an instance of Pocket.\n   * @param {Object} opts - Options for the initializer, devID, networkName, netIDs, maxNodes, requestTimeOut.\n   * @memberof Pocket\n   */\n  constructor(opts) {\n    var blockchains = [];\n\n    if (opts.devID == null || opts.networkName == null || opts.netIDs == null) {\n      return new Error(\"Invalid number of arguments\");\n    }\n\n    if (Array.isArray(opts.netIDs)) {\n      opts.netIDs.forEach(element => {\n        var blockchain = new Blockchain(opts.networkName, element);\n        blockchains.push(blockchain.toJSON());\n      });\n    } else {\n      var blockchain = new Blockchain(opts.networkName, opts.netIDs);\n      blockchains.push(blockchain.toJSON());\n    }\n\n    this.configuration = new Configuration(opts.devID, blockchains, opts.maxNodes || 5, opts.requestTimeOut || 10000);\n\n  }\n  /**\n   *\n   * Create a Relay instance\n   * @param {Blockchain} blockchain - Blockchain object.\n   * @param {String} netID - Network Idenfifier.\n   * @param {String} data - String holding the json rpc call.\n   * @returns {Relay} - New Relay instance.\n   * @memberof Pocket\n   */\n  createRelay(blockchain, netID, data) {\n    // Check if data is a json tring\n    if (typeof data == 'string') {\n      return new Relay(blockchain, netID, data, this.configuration); \n    }\n    return new Relay(blockchain, netID, JSON.stringify(data), this.configuration);\n  }\n  /**\n   *\n   * Create a Report instance\n   * @param {String} ip - Internet protocol address.\n   * @param {String} message - Brief description for the report.\n   * @returns {Report} - New Report instance.\n   * @memberof Pocket\n   */\n  createReport(ip, message) {\n    return new Report(ip, message, this.configuration);\n  }\n  /**\n   *\n   * Get a Dispatch instance or creates one\n   * @returns {Dispatch} - New or existing Dispatch instance.\n   * @memberof Pocket\n   */\n  getDispatch() {\n    if (this.dispatch == null) {\n      this.dispatch = new Dispatch(this.configuration);\n    }\n    return this.dispatch;\n  }\n  /**\n   *\n   * Filter nodes by netID and blockchain name\n   * @param {String} netID - Network Idenfifier.\n   * @param {String} network - Network Name.\n   * @returns {Node} - New Node instance.\n   * @memberof Pocket\n   */\n  async getNode(netID, network) {\n    try {\n      var nodes = [];\n\n      if (this.configuration.nodesIsEmpty()) {\n        var response = await this.retrieveNodes();\n\n        if (response instanceof Error == true) {\n          throw response;\n        }else {\n          // Save the nodes to the configuration.\n          this.configuration.nodes = response;\n        }\n      }\n      \n      this.configuration.nodes.forEach(node => {\n        if (node.isEqual(netID, network)) {\n          nodes.push(node);\n        }\n      });\n\n      if (nodes.length <= 0) {\n        return null\n      }\n\n      return nodes[Math.floor(Math.random() * nodes.length)];\n    } catch (error) {\n      return null;\n    }\n  }\n  /**\n   *\n   * Send a report\n   * @param {Report} report - Report instance with the information.\n   * @param {callback} callback - callback handler.\n   * @returns {String} - A String with the response.\n   * @memberof Pocket\n   */\n  async sendReport(report, callback) {\n    try {\n      // Check for report\n      if (report == null) {\n        throw new Error(\"Report is null\");\n      }\n      // Verify all report properties are set\n      if (!report.isValid()) {\n        throw new Error(\"One or more Report properties are empty.\");\n      }\n      // Send Report\n      var response = await report.send();\n      // Response\n      if (response instanceof Error == false) {\n        if (callback) {\n          callback(null, response);\n          return;\n        } else {\n          return response;\n        }\n      } else {\n        if (callback) {\n          callback(response);\n          return;\n        } else {\n          return response;\n        }\n      }\n    } catch (error) {\n      if (callback) {\n        callback(error);\n        return;\n      } else {\n        return error;\n      }\n    }\n  }\n  /**\n   *\n   * Send an already created Relay\n   * @param {Relay} relay - Relay instance with the information.\n   * @param {callback} callback - callback handler.\n   * @returns {String} - A String with the response.\n   * @memberof Pocket\n   */\n  async sendRelay(relay, callback) {\n    try {\n      // Check for relay\n      if (relay == null || relay.data == null) {\n        if (callback) {\n          callback(new Error(\"Relay is null or data field is missing\"));\n          return;\n        } else {\n          return new Error(\"Relay is null or data field is missing\");\n        }\n      }\n      // Verify all relay properties are set\n      if (!relay.isValid()) {\n        if (callback) {\n          callback(new Error(\"Relay is missing a property, please verify all properties.\"));\n          return;\n        } else {\n          return new Error(\"Relay is missing a property, please verify all properties.\");\n        }\n      }\n\n      // Filter nodes for specified blockchain\n      var node = await this.getNode(relay.netID,\n        relay.blockchain);\n\n      if (node == null) {\n        if (callback) {\n          callback(new Error(\"Node is empty.\"));\n          return;\n        } else {\n          return new Error(\"Node is empty.\");\n        }\n      }\n\n      // Send relay\n      var response = await node.sendRelay(relay);\n      // Response\n      if (response instanceof Error == false) {\n        if (callback) {\n          callback(null, response);\n          return;\n        } else {\n          return response;\n        }\n      } else {\n        if (callback) {\n          callback(response);\n          return;\n        } else {\n          return response;\n        }\n      }\n\n    } catch (error) {\n      if (callback) {\n        callback(new Error(\"Failed to send relay with error: \" + error));\n        return;\n      } else {\n        return new Error(\"Failed to send relay with error: \" + error);\n      }\n    }\n\n  }\n  /**\n   *\n   * Retrieve a list of service nodes from the Node Dispatcher\n   * @param {callback} callback\n   * @returns {Node} - A list of Nodes.\n   * @memberof Pocket\n   */\n  async retrieveNodes(callback) {\n    try {\n      var dispatch = this.getDispatch();\n      var nodes = await dispatch.retrieveServiceNodes();\n      \n      if (nodes instanceof Error == false && nodes.length != 0) {\n        // Save the nodes to the configuration.\n        this.configuration.nodes = nodes;\n        // Return a list of nodes\n        if (callback) {\n          callback(null, nodes);\n          return;\n        } else {\n          return nodes;\n        }\n      } else {\n        // Returns an Error;\n        if (callback) {\n          callback(new Error(\"Failed to retrieve a list of nodes.\"), null);\n          return;\n        } else {\n          return new Error(\"Failed to retrieve a list of nodes.\");\n        }\n      }\n\n    } catch (error) {\n      if (callback) {\n        callback(new Error(\"Failed to retrieve a list of nodes with error: \"+error), null);\n        return;\n      } else {\n        return new Error(\"Failed to retrieve a list of nodes with error: \"+error);\n      }\n    }\n  }\n\n}\n\nmodule.exports = Pocket;","const Models = require(\"./models/index\");\nconst Wallet = Models.Wallet;\nconst Relay = Models.Relay;\nconst Pocket = require(\"./pocket\");\n\nmodule.exports = {\n  Pocket,\n  Wallet,\n  Relay\n}","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport ProviderEngine from '@portis/web3-provider-engine';\nimport CacheSubprovider from '@portis/web3-provider-engine/subproviders/cache.js';\nimport FixtureSubprovider from '@portis/web3-provider-engine/subproviders/fixture.js';\nimport FilterSubprovider from '@portis/web3-provider-engine/subproviders/filters.js';\nimport HookedWalletSubprovider from '@portis/web3-provider-engine/subproviders/hooked-wallet.js';\nimport NonceSubprovider from '@portis/web3-provider-engine/subproviders/nonce-tracker.js';\nimport SubscriptionsSubprovider from '@portis/web3-provider-engine/subproviders/subscriptions.js';\nimport Penpal from 'penpal';\nimport { networkAdapter } from './networks';\nimport { getTxGas } from './utils/getTxGas';\nimport { Query } from './utils/query';\nimport { onWindowLoad } from './utils/onWindowLoad';\nimport { styles } from './styles';\nimport { validateSecureOrigin } from './utils/secureOrigin';\nimport PocketJSCore from 'pocket-js-core';\nvar VERSION = '2.0.0-beta.54';\nvar WIDGET_URL = 'https://widget.portis.io';\nvar SUPPORTED_SCOPES = ['email', 'reputation'];\nvar tempCachingIFrame = document.createElement('iframe');\ntempCachingIFrame.style.width = '0';\ntempCachingIFrame.style.height = '0';\ntempCachingIFrame.style.border = 'none';\ntempCachingIFrame.style.position = 'absolute';\ntempCachingIFrame.style.top = '-999px';\ntempCachingIFrame.style.left = '-999px';\ntempCachingIFrame.src = WIDGET_URL;\nonWindowLoad().then(function () {\n    document.body.appendChild(tempCachingIFrame);\n});\nvar Portis = /** @class */ (function () {\n    function Portis(dappId, network, options) {\n        if (options === void 0) { options = {}; }\n        this._widgetUrl = WIDGET_URL;\n        validateSecureOrigin();\n        this._valiadateParams(dappId, network, options);\n        this.config = {\n            dappId: dappId,\n            network: networkAdapter(network, options.gasRelay),\n            version: VERSION,\n            scope: options.scope,\n            registerPageByDefault: options.registerPageByDefault,\n        };\n        this.widget = this._initWidget();\n        this.provider = this._initProvider(options);\n    }\n    Portis.prototype.changeNetwork = function (network, gasRelay) {\n        var newNetwork = networkAdapter(network, gasRelay);\n        this.clearSubprovider(NonceSubprovider);\n        this.clearSubprovider(CacheSubprovider);\n        this.config.network = newNetwork;\n    };\n    Portis.prototype.setDefaultEmail = function (email) {\n        this.config.defaultEmail = email;\n    };\n    Portis.prototype.showPortis = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var widgetCommunication;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.widget];\n                    case 1:\n                        widgetCommunication = (_a.sent()).communication;\n                        return [2 /*return*/, widgetCommunication.showPortis(this.config)];\n                }\n            });\n        });\n    };\n    Portis.prototype.logout = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var widgetCommunication;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.widget];\n                    case 1:\n                        widgetCommunication = (_a.sent()).communication;\n                        return [2 /*return*/, widgetCommunication.logout()];\n                }\n            });\n        });\n    };\n    Portis.prototype.onLogin = function (callback) {\n        this._onLoginCallback = callback;\n    };\n    Portis.prototype.onLogout = function (callback) {\n        this._onLogoutCallback = callback;\n    };\n    Portis.prototype.onActiveWalletChanged = function (callback) {\n        this._onActiveWalletChangedCallback = callback;\n    };\n    Portis.prototype.onError = function (callback) {\n        this._onErrorCallback = callback;\n    };\n    Portis.prototype.getExtendedPublicKey = function (path, coin) {\n        if (path === void 0) { path = \"m/44'/60'/0'/0/0\"; }\n        if (coin === void 0) { coin = 'Ethereum'; }\n        return __awaiter(this, void 0, void 0, function () {\n            var widgetCommunication;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.widget];\n                    case 1:\n                        widgetCommunication = (_a.sent()).communication;\n                        return [2 /*return*/, widgetCommunication.getExtendedPublicKey(path, coin, this.config)];\n                }\n            });\n        });\n    };\n    Portis.prototype.importWallet = function (mnemonicOrPrivateKey) {\n        return __awaiter(this, void 0, void 0, function () {\n            var widgetCommunication;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.widget];\n                    case 1:\n                        widgetCommunication = (_a.sent()).communication;\n                        return [2 /*return*/, widgetCommunication.importWallet(mnemonicOrPrivateKey, this.config)];\n                }\n            });\n        });\n    };\n    Portis.prototype.isLoggedIn = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var widgetCommunication;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.widget];\n                    case 1:\n                        widgetCommunication = (_a.sent()).communication;\n                        return [2 /*return*/, widgetCommunication.isLoggedIn()];\n                }\n            });\n        });\n    };\n    Portis.prototype.signBitcoinTransaction = function (params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var widgetCommunication;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.widget];\n                    case 1:\n                        widgetCommunication = (_a.sent()).communication;\n                        return [2 /*return*/, widgetCommunication.signBitcoinTransaction(params, this.config)];\n                }\n            });\n        });\n    };\n    Portis.prototype.showBitcoinWallet = function (path) {\n        if (path === void 0) { path = \"m/49'/0'/0'/0/0\"; }\n        return __awaiter(this, void 0, void 0, function () {\n            var widgetCommunication;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.widget];\n                    case 1:\n                        widgetCommunication = (_a.sent()).communication;\n                        return [2 /*return*/, widgetCommunication.showBitcoinWallet(path, this.config)];\n                }\n            });\n        });\n    };\n    Portis.prototype._valiadateParams = function (dappId, network, options) {\n        if (!dappId) {\n            throw new Error(\"[Portis] 'dappId' is required. Get your dappId here: https://dashboard.portis.io\");\n        }\n        if (!network) {\n            throw new Error(\"[Portis] 'network' is required. Read more about it here: https://docs.portis.io/#/configuration?id=network\");\n        }\n        if (options.scope) {\n            if (!Array.isArray(options.scope)) {\n                throw new Error(\"[Portis] 'scope' must be an array. Read more about it here: https://docs.portis.io/#/configuration?id=scope\");\n            }\n            var unknownScope = options.scope.filter(function (item) { return SUPPORTED_SCOPES.indexOf(item) < 0; });\n            if (unknownScope.length > 0) {\n                throw new Error(\"[Portis] invalid 'scope' parameter. Read more about it here: https://docs.portis.io/#/configuration?id=scope\");\n            }\n        }\n        if (options.registerPageByDefault !== undefined && typeof options.registerPageByDefault !== 'boolean') {\n            throw new Error(\"[Portis] invalid 'registerPageByDefault' parameter, must be a boolean. Read more about it here: https://docs.portis.io/#/configuration?id=registerPageByDefault\");\n        }\n    };\n    Portis.prototype._initWidget = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var style, container, widgetFrame, connection, communication;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, onWindowLoad()];\n                    case 1:\n                        _a.sent();\n                        if (document.body.contains(tempCachingIFrame)) {\n                            document.body.removeChild(tempCachingIFrame);\n                        }\n                        style = document.createElement('style');\n                        style.innerHTML = styles;\n                        container = document.createElement('div');\n                        container.className = 'por_portis-container';\n                        widgetFrame = document.createElement('div');\n                        widgetFrame.id = \"portis-container-\" + Date.now();\n                        widgetFrame.className = 'por_portis-widget-frame';\n                        container.appendChild(widgetFrame);\n                        document.body.appendChild(container);\n                        document.head.appendChild(style);\n                        connection = Penpal.connectToChild({\n                            url: this._widgetUrl,\n                            appendTo: document.getElementById(widgetFrame.id),\n                            methods: {\n                                setHeight: this._setHeight.bind(this),\n                                getWindowSize: this._getWindowSize.bind(this),\n                                onLogin: this._onLogin.bind(this),\n                                onLogout: this._onLogout.bind(this),\n                                onActiveWalletChanged: this._onActiveWalletChanged.bind(this),\n                                onError: this._onError.bind(this),\n                            },\n                        });\n                        connection.iframe.style.position = 'absolute';\n                        connection.iframe.style.height = '100%';\n                        connection.iframe.style.width = '100%';\n                        connection.iframe.style.border = '0 transparent';\n                        return [4 /*yield*/, connection.promise];\n                    case 2:\n                        communication = _a.sent();\n                        communication.retrieveSession(this.config);\n                        return [2 /*return*/, { communication: communication, iframe: connection.iframe, widgetFrame: widgetFrame }];\n                }\n            });\n        });\n    };\n    Portis.prototype._initProvider = function (options) {\n        var _this = this;\n        var engine = new ProviderEngine();\n        var query = new Query(engine);\n        engine.send = function (payload, callback) {\n            // Web3 1.0 beta.38 (and above) calls `send` with method and parameters\n            if (typeof payload === 'string') {\n                return new Promise(function (resolve, reject) {\n                    engine.sendAsync({\n                        jsonrpc: '2.0',\n                        id: 42,\n                        method: payload,\n                        params: callback || [],\n                    }, function (error, response) {\n                        if (error) {\n                            reject(error);\n                        }\n                        else {\n                            resolve(response.result);\n                        }\n                    });\n                });\n            }\n            // Web3 1.0 beta.37 (and below) uses `send` with a callback for async queries\n            if (callback) {\n                engine.sendAsync(payload, callback);\n                return;\n            }\n            var result = null;\n            switch (payload.method) {\n                case 'eth_accounts':\n                    result = _this._selectedAddress ? [_this._selectedAddress] : [];\n                    break;\n                case 'eth_coinbase':\n                    result = _this._selectedAddress ? [_this._selectedAddress] : [];\n                    break;\n                case 'net_version':\n                    result = _this._network;\n                    break;\n                case 'eth_uninstallFilter':\n                    engine.sendAsync(payload, function (_) { return _; });\n                    result = true;\n                    break;\n                default:\n                    var message = \"The Portis Web3 object does not support synchronous methods like \" + payload.method + \" without a callback parameter.\";\n                    throw new Error(message);\n            }\n            return {\n                id: payload.id,\n                jsonrpc: payload.jsonrpc,\n                result: result,\n            };\n        };\n        engine.addProvider(new FixtureSubprovider({\n            web3_clientVersion: \"Portis/v\" + this.config.version + \"/javascript\",\n            net_listening: true,\n            eth_hashrate: '0x00',\n            eth_mining: false,\n            eth_syncing: true,\n        }));\n        engine.addProvider(new CacheSubprovider());\n        engine.addProvider(new SubscriptionsSubprovider());\n        engine.addProvider(new FilterSubprovider());\n        engine.addProvider(new NonceSubprovider());\n        engine.addProvider({\n            setEngine: function (_) { return _; },\n            handleRequest: function (payload, next, end) { return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    if (!payload.id) {\n                        payload.id = 42;\n                    }\n                    next();\n                    return [2 /*return*/];\n                });\n            }); },\n        });\n        engine.addProvider(new HookedWalletSubprovider({\n            getAccounts: function (cb) { return __awaiter(_this, void 0, void 0, function () {\n                var widgetCommunication, _a, error, result;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, this.widget];\n                        case 1:\n                            widgetCommunication = (_b.sent()).communication;\n                            return [4 /*yield*/, widgetCommunication.getAccounts(this.config)];\n                        case 2:\n                            _a = _b.sent(), error = _a.error, result = _a.result;\n                            if (!error && result) {\n                                this._selectedAddress = result[0];\n                            }\n                            cb(error, result);\n                            return [2 /*return*/];\n                    }\n                });\n            }); },\n            signTransaction: function (txParams, cb) { return __awaiter(_this, void 0, void 0, function () {\n                var widgetCommunication, _a, error, result;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, this.widget];\n                        case 1:\n                            widgetCommunication = (_b.sent()).communication;\n                            return [4 /*yield*/, widgetCommunication.signTransaction(txParams, this.config)];\n                        case 2:\n                            _a = _b.sent(), error = _a.error, result = _a.result;\n                            cb(error, result);\n                            return [2 /*return*/];\n                    }\n                });\n            }); },\n            signMessage: function (msgParams, cb) { return __awaiter(_this, void 0, void 0, function () {\n                var widgetCommunication, params, _a, error, result;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, this.widget];\n                        case 1:\n                            widgetCommunication = (_b.sent()).communication;\n                            params = Object.assign({}, msgParams, { messageStandard: 'signMessage' });\n                            return [4 /*yield*/, widgetCommunication.signMessage(params, this.config)];\n                        case 2:\n                            _a = _b.sent(), error = _a.error, result = _a.result;\n                            cb(error, result);\n                            return [2 /*return*/];\n                    }\n                });\n            }); },\n            signPersonalMessage: function (msgParams, cb) { return __awaiter(_this, void 0, void 0, function () {\n                var widgetCommunication, params, _a, error, result;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, this.widget];\n                        case 1:\n                            widgetCommunication = (_b.sent()).communication;\n                            params = Object.assign({}, msgParams, { messageStandard: 'signPersonalMessage' });\n                            return [4 /*yield*/, widgetCommunication.signMessage(params, this.config)];\n                        case 2:\n                            _a = _b.sent(), error = _a.error, result = _a.result;\n                            cb(error, result);\n                            return [2 /*return*/];\n                    }\n                });\n            }); },\n            signTypedMessage: function (msgParams, cb) { return __awaiter(_this, void 0, void 0, function () {\n                var widgetCommunication, params, _a, error, result;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, this.widget];\n                        case 1:\n                            widgetCommunication = (_b.sent()).communication;\n                            params = Object.assign({}, msgParams, { messageStandard: 'signTypedMessage' });\n                            return [4 /*yield*/, widgetCommunication.signMessage(params, this.config)];\n                        case 2:\n                            _a = _b.sent(), error = _a.error, result = _a.result;\n                            cb(error, result);\n                            return [2 /*return*/];\n                    }\n                });\n            }); },\n            signTypedMessageV3: function (msgParams, cb) { return __awaiter(_this, void 0, void 0, function () {\n                var widgetCommunication, params, _a, error, result;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0: return [4 /*yield*/, this.widget];\n                        case 1:\n                            widgetCommunication = (_b.sent()).communication;\n                            params = Object.assign({}, msgParams, { messageStandard: 'signTypedMessageV3' });\n                            return [4 /*yield*/, widgetCommunication.signMessage(params, this.config)];\n                        case 2:\n                            _a = _b.sent(), error = _a.error, result = _a.result;\n                            cb(error, result);\n                            return [2 /*return*/];\n                    }\n                });\n            }); },\n            estimateGas: function (txParams, cb) { return __awaiter(_this, void 0, void 0, function () {\n                var gas;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, getTxGas(query, txParams)];\n                        case 1:\n                            gas = _a.sent();\n                            cb(null, gas);\n                            return [2 /*return*/];\n                    }\n                });\n            }); },\n            getGasPrice: function (cb) { return __awaiter(_this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    cb(null, '');\n                    return [2 /*return*/];\n                });\n            }); },\n        }));\n        if (!options.pocketDevId) {\n            engine.addProvider({\n                setEngine: function (_) { return _; },\n                handleRequest: function (payload, next, end) { return __awaiter(_this, void 0, void 0, function () {\n                    var widgetCommunication, _a, error, result;\n                    return __generator(this, function (_b) {\n                        switch (_b.label) {\n                            case 0: return [4 /*yield*/, this.widget];\n                            case 1:\n                                widgetCommunication = (_b.sent()).communication;\n                                return [4 /*yield*/, widgetCommunication.relay(payload, this.config)];\n                            case 2:\n                                _a = _b.sent(), error = _a.error, result = _a.result;\n                                if (payload.method === 'net_version') {\n                                    this._network = result;\n                                    engine.networkVersion = this._network;\n                                }\n                                end(error, result);\n                                return [2 /*return*/];\n                        }\n                    });\n                }); },\n            });\n        }\n        else {\n            var pocket_1 = new PocketJSCore.Pocket({\n                devID: options.pocketDevId,\n                networkName: 'ETH',\n                netIDs: [this.config.network.chainId],\n            });\n            engine.addProvider({\n                setEngine: function (_) { return _; },\n                handleRequest: function (payload, next, end) { return __awaiter(_this, void 0, void 0, function () {\n                    var response, result, error;\n                    return __generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0: return [4 /*yield*/, pocket_1.sendRelay(new PocketJSCore.Relay('ETH', this.config.network.chainId, JSON.stringify(payload), pocket_1.configuration))];\n                            case 1:\n                                response = _a.sent();\n                                if (response instanceof Error || !response) {\n                                    error = response || new Error('Unknown error');\n                                    result = null;\n                                }\n                                else {\n                                    try {\n                                        result = JSON.parse(response).result;\n                                        error = null;\n                                    }\n                                    catch (e) {\n                                        result = null;\n                                        error = e;\n                                    }\n                                }\n                                if (payload.method === 'net_version') {\n                                    this._network = result;\n                                    engine.networkVersion = this._network;\n                                }\n                                end(error, result);\n                                return [2 /*return*/];\n                        }\n                    });\n                }); },\n            });\n        }\n        engine.enable = function () {\n            return new Promise(function (resolve, reject) {\n                engine.sendAsync({ method: 'eth_accounts' }, function (error, response) {\n                    if (error) {\n                        reject(error);\n                    }\n                    else {\n                        resolve(response.result);\n                    }\n                });\n            });\n        };\n        engine.isConnected = function () {\n            return true;\n        };\n        engine.isPortis = true;\n        engine.on('error', function (error) {\n            if (error && error.message && error.message.includes('PollingBlockTracker')) {\n                console.warn('If you see this warning constantly, there might be an error with your RPC node.');\n            }\n            else {\n                console.error(error);\n            }\n        });\n        engine.start();\n        return engine;\n    };\n    Portis.prototype._setHeight = function (height) {\n        return __awaiter(this, void 0, void 0, function () {\n            var widgetFrame;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.widget];\n                    case 1:\n                        widgetFrame = (_a.sent()).widgetFrame;\n                        widgetFrame.style.height = height + \"px\";\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Portis.prototype._getWindowSize = function () {\n        var body = document.getElementsByTagName('body')[0];\n        var width = window.innerWidth || document.documentElement.clientWidth || body.clientWidth;\n        var height = window.innerHeight || document.documentElement.clientHeight || body.clientHeight;\n        return { width: width, height: height };\n    };\n    Portis.prototype._onLogin = function (walletAddress, email, reputation) {\n        if (this._onLoginCallback) {\n            this._onLoginCallback(walletAddress, email, reputation);\n        }\n    };\n    Portis.prototype._onLogout = function () {\n        this._selectedAddress = '';\n        if (this._onLogoutCallback) {\n            this._onLogoutCallback();\n        }\n    };\n    Portis.prototype._onActiveWalletChanged = function (walletAddress) {\n        if (this._onActiveWalletChangedCallback) {\n            this._onActiveWalletChangedCallback(walletAddress);\n        }\n    };\n    Portis.prototype._onError = function (error) {\n        if (this._onErrorCallback) {\n            this._onErrorCallback(error);\n        }\n    };\n    Portis.prototype.clearSubprovider = function (subproviderType) {\n        var subprovider = this.provider._providers.find(function (subprovider) { return subprovider instanceof subproviderType; });\n        this.provider.removeProvider(subprovider);\n        this.provider.addProvider(new subproviderType());\n    };\n    return Portis;\n}());\nexport default Portis;\n//# sourceMappingURL=index.js.map","export function validateSecureOrigin() {\n    var isLocalhost = location.hostname === 'localhost' || location.hostname === '127.0.0.1';\n    var isSecureOrigin = location.protocol === 'https:';\n    var isSecure = isLocalhost || isSecureOrigin;\n    if (!isSecure) {\n        throw \"[Portis] Access to the WebCrypto API is restricted to secure origins.\\nIf this is a development environment please use http://localhost:\" + location.port + \" instead.\\nOtherwise, please use an SSL certificate.\";\n    }\n}\n//# sourceMappingURL=secureOrigin.js.map","export var styles = \"\\n.por_portis-container {\\n  position: fixed;\\n  width: 0px;\\n  height: 0px;\\n  top: 0px;\\n  right: 0px;\\n  z-index: 2147483647;\\n}\\n\\n@media (max-width: 576px) {\\n  .por_portis-container {\\n    bottom: 0;\\n    top: auto;\\n  }\\n}\\n\\n.por_portis-widget-frame {\\n  position: fixed;\\n  width: 375px;\\n  height: 0;\\n  top: 20px;\\n  right: 20px;\\n  box-shadow: 0 5px 40px rgba(0,0,0,.16);\\n  border-radius: 8px;\\n  overflow: hidden;\\n  z-index: 2147483000;\\n}\\n\\n@media (max-width: 576px) {\\n  .por_portis-widget-frame {\\n    bottom: 0;\\n    top: auto;\\n    width: 100%;\\n    right: 0;\\n    left: 0;\\n    border-bottom-left-radius: 0;\\n    border-bottom-right-radius: 0;\\n  }\\n}\\n\";\n//# sourceMappingURL=styles.js.map"],"names":["EventEmitter","require$$0","inherits","require$$1","Stoplight","call","this","isLocked","prototype","go","emit","stop","await","fn","self","once","setTimeout","payload","index","blockTagParamIndex","params","length","method","datePart","Date","getTime","Math","pow","extraPart","floor","random","data","extend","id","getRandomId","jsonrpc","noop","Web3ProviderEngine","opts","setMaxListeners","directProvider","sendAsync","_handleAsync","bind","blockTrackerProvider","_blockTracker","blockTracker","EthBlockTracker","provider","pollingInterval","setSkipCacheFlag","_ready","currentBlock","_providers","Object","defineProperty","value","start","cb","on","blockNumber","_getBlockByNumber","err","block","bufferBlock","jsonBlock","number","ethUtil","toBuffer","hash","parentHash","nonce","mixHash","sha3Uncles","logsBloom","transactionsRoot","stateRoot","receiptsRoot","receiptRoot","miner","difficulty","totalDifficulty","size","extraData","gasLimit","gasUsed","timestamp","transactions","_setCurrentBlock","_running","removeAllListeners","isRunning","addProvider","source","splice","push","setEngine","removeProvider","indexOf","Error","send","Array","isArray","map","req","createPayload","skipCache","res","result","finished","currentProvider","error","stack","end","_error","_result","eachSeries","callback","resultObj","message","code","next","after","unshift","handleRequest","e","SubProvider","engine","emitPayload","Subprovider","[object Object]","constructorFn","super","_constructorFn","middleware","provEngNext","provEngEnd","handler","cacheIdentifierForPayload","skipBlockRef","simpleParams","paramsWithoutBlockTag","canCache","stringify","blockTagForPayload","cacheTypeForPayload","slice","emptyValues","undefined","blockCache","BlockCacheStrategy","strategies","perma","fork","createAsyncMiddleware","async","type","cacheUtils","strategy","canCacheRequest","requestedBlockNumber","blockTag","latestBlockNumber","getLatestBlock","clearBefore","cacheResult","get","set","cache","blockNumberHex","Number","parseInt","newCache","getBlockCacheForPayload","canCacheResult","includes","blockHash","oldBlockHex","oldBlockNumber","keys","filter","num","forEach","ProviderSubprovider","createBlockCacheMiddleware","assign","FixtureProvider","staticResponses","staticResponse","createFilterMiddleware","txParams","hexRegex","HookedWalletSubprovider","nonceLock","Semaphore","getAccounts","processTransaction","processMessage","processPersonalMessage","processTypedMessage","processTypedMessageV3","approveTransaction","autoApprove","approveMessage","approvePersonalMessage","approveTypedMessage","approveTypedMessageV3","signTransaction","mustProvideInConstructor","signMessage","signPersonalMessage","signTypedMessage","signTypedMessageV3","recoverPersonalSignature","publishTransaction","estimateGas","getGasPrice","toLowerCase","string","resemblesAddress","fixed","addHexPrefix","isValidAddress","resemblesData","isValidHex","match","methodName","msgParams","extraParams","address","_parityRequests","_parityRequestCount","accounts","waterfall","validateTransaction","processSignTransaction","from","validateMessage","first","warning","console","warn","validatePersonalMessage","signature","sig","validateTypedMessage","validateTypedMessageV3","parityPostTransaction","parityPostSign","requestId","parityCheckRequest","account","didApprove","checkApproval","finalizeAndSubmitTx","finalizeTx","reqId","toString","txHash","senderHex","sigUtil","validateSender","senderIsValid","senderAddress","take","fillInTxExtras","leave","signedTx","raw","tx","rawTx","tasks","gasPrice","gas","to","cloneTxParams","parallel","taskResults","NonceTrackerSubprovider","nonceCache","cachedResult","stripHexPrefix","Buffer","Transaction","getSenderAddress","bufferToInt","hexNonce","events","createSubscriptionManager","exports","MESSAGE","DEFAULT_PORTS","http:","https:","URL_REGEX","Penpal","ERR_CONNECTION_DESTROYED","ERR_CONNECTION_TIMEOUT","ERR_NOT_IN_IFRAME","Promise","window","debug","generateId","log","_console","_len","arguments","args","_key","apply","concat","DestructionPromise","executor","handlers","then","serializeError","_ref","name","deserializeError","obj","deserializedError","key","connectCallSender","callSender","info","methodNames","destructionPromise","localName","local","remote","remoteOrigin","destroyed","reduce","api","_len2","_key2","resolve","reject","addEventListener","handleMessageEvent","event","origin","penpal","removeEventListener","returnValue","returnValueIsError","resolution","postMessage","createMethodProxy","connectCallReceiver","methods","_event$data","createPromiseHandler","connectToChild","_ref2","destroy","url","appendTo","_ref2$methods","timeout","connectionDestructionPromise","resolveConnectionDestructionPromise","parent","iframe","document","createElement","body","appendChild","parentNode","removeChild","child","contentWindow","contentDocument","parentWindow","childOrigin","protocol","hostname","port","location","regexResult","exec","portSuffix","getOriginFromUrl","promise","resolveConnectionPromise","connectionTimeoutId","receiverMethodNames","destroyCallReceiver","handleMessage","callReceiverDestructionPromise","resolveCallReceiverDestructionPromise","receiverMethodName","clearTimeout","src","connectToParent","_ref3","_ref3$parentOrigin","parentOrigin","_ref3$methods","top","_default","networkAdapter","network","gasRelay","networkObj","networks","nodeUrl","gasRelayHubAddress","mainnet","chainId","ropsten","rinkeby","goerli","ubiq","thundercoreTestnet","orchid","orchidTestnet","kovan","classic","sokol","core","xdai","thundercore","fuse","lightstreams","maticAlpha","maticTestnet","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","done","__generator","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","TypeError","pop","_a","require","BN","getTxGas","query","safeGas","simpleSend","gasLimitSpecified","_b","getBlockByNumber","safeTxGas","estimateTxGas","blockGasLimitHex","recipient","blockGasLimitBN","Boolean","getCode","hexToBn","targetBN","denominator","numBN","denomBN","bnToHex","mul","div","addGasBuffer","initialGasLimitHex","initialGasLimitBn","upperGasLimitBn","muln","bufferedGasLimitBn","gt","lt","inputHex","inputBn","Query","fullTransaction","_this","_i","response","loaded","onWindowLoad","readyState","Blockchain","netID","JSON","parse","i","val","isObject","isFunction","l","hasOwnProperty","isArrayBuffer","isBuffer","constructor","isFormData","FormData","isArrayBufferView","ArrayBuffer","isView","buffer","isString","isNumber","isUndefined","isDate","isFile","isBlob","isStream","pipe","isURLSearchParams","URLSearchParams","isStandardBrowserEnv","navigator","product","merge","assignValue","a","b","trim","str","replace","config","request","enhanceError","encode","encodeURIComponent","ignoreDuplicateOf","utils","originURL","msie","test","userAgent","urlParsingNode","resolveURL","href","setAttribute","host","search","pathname","charAt","requestURL","parsed","write","expires","path","domain","secure","cookie","toGMTString","join","read","RegExp","decodeURIComponent","remove","now","requestData","requestHeaders","headers","XMLHttpRequest","auth","username","password","Authorization","btoa","open","toUpperCase","paramsSerializer","serializedParams","parts","toISOString","buildURL","onreadystatechange","status","responseURL","responseHeaders","getAllResponseHeaders","split","line","substr","responseType","responseText","statusText","validateStatus","createError","settle","onerror","ontimeout","cookies","xsrfValue","withCredentials","isURLSameOrigin","xsrfCookieName","xsrfHeaderName","setRequestHeader","onDownloadProgress","onUploadProgress","upload","cancelToken","cancel","abort","DEFAULT_CONTENT_TYPE","Content-Type","setContentTypeIfUnset","adapter","defaults","process","transformRequest","normalizedName","normalizeHeaderName","transformResponse","maxContentLength","common","Accept","InterceptorManager","use","eject","h","fns","__CANCEL__","throwIfCancellationRequested","throwIfRequested","baseURL","relativeURL","transformData","reason","isCancel","Axios","instanceConfig","interceptors","chain","dispatchRequest","interceptor","shift","Cancel","CancelToken","resolvePromise","token","c","createInstance","defaultConfig","context","instance","axios","create","require$$2","all","promises","spread","arr","Node","ipPort","ipPortArr","ip","property","relay","axiosInstance","configuration","requestTimeOut","post","constants","toJSON","Dispatch","blockchainArray","blockchains","element","DevID","devID","Blockchains","blockchainsJSON","nodes","parseDispatchResponse","netid","ips","node","Relay","blockchain","NetID","Data","Report","IP","Message","Wallet","privateKey","networkID","module","require$$3","require$$4","require$$5","Models","Configuration","maxNodes","dispatch","networkName","netIDs","nodesIsEmpty","retrieveNodes","isEqual","report","isValid","getNode","sendRelay","getDispatch","retrieveServiceNodes","SUPPORTED_SCOPES","tempCachingIFrame","style","width","height","border","position","left","Portis","dappId","options","_widgetUrl","isLocalhost","isSecureOrigin","validateSecureOrigin","_valiadateParams","version","scope","registerPageByDefault","widget","_initWidget","_initProvider","changeNetwork","newNetwork","clearSubprovider","NonceSubprovider","CacheSubprovider","setDefaultEmail","email","defaultEmail","showPortis","communication","logout","onLogin","_onLoginCallback","onLogout","_onLogoutCallback","onActiveWalletChanged","_onActiveWalletChangedCallback","onError","_onErrorCallback","getExtendedPublicKey","coin","importWallet","mnemonicOrPrivateKey","isLoggedIn","signBitcoinTransaction","showBitcoinWallet","item","container","widgetFrame","connection","contains","innerHTML","className","head","getElementById","setHeight","_setHeight","getWindowSize","_getWindowSize","_onLogin","_onLogout","_onActiveWalletChanged","_onError","retrieveSession","ProviderEngine","_selectedAddress","_network","FixtureSubprovider","web3_clientVersion","net_listening","eth_hashrate","eth_mining","eth_syncing","SubscriptionsSubprovider","FilterSubprovider","widgetCommunication","messageStandard","pocketDevId","pocket_1","PocketJSCore","Pocket","networkVersion","enable","isConnected","isPortis","getElementsByTagName","innerWidth","documentElement","clientWidth","innerHeight","clientHeight","walletAddress","reputation","subproviderType","subprovider","find"],"mappings":"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"}